(this["webpackJsonp247-admin"]=this["webpackJsonp247-admin"]||[]).push([[0],{342:function(e,t,a){},345:function(e,t,a){},568:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(47),s=a.n(c),i=a(45),o=a(57),l=Object(o.a)(),d=(a(342),a(343),a(344),a(345),"/login"),u="/overview",p=a(4),b=a(15),j=a(3),m=a(38),h=a(92),f=a.n(h),g=a(1),x=["inputIcon","registerFn","errorText","label","darkMode","isNumeric","setValue"],O=function(e){var t=e.inputIcon,a=e.registerFn,n=e.errorText,r=e.label,c=e.darkMode,s=e.isNumeric,i=e.setValue,o=Object(m.a)(e,x);return Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:"relative mt-8",children:[r&&Object(g.jsx)("label",{className:"text-base mb-2 font-medium inline-block text-white",children:r}),Object(g.jsx)("input",Object(j.a)(Object(j.a)(Object(j.a)({},o),s?a(e.name,{onChange:function(t){console.log(t.target.value.replace(/\D/g,""));var a=parseFloat(t.target.value.replace(/\D/g,"").replace(/,/g,""));i(e.name,a?a.toLocaleString():"")}}):a(e.name)),{},{className:f()("w-full","px-5","py-3","border",{"border-247-dark-text":!n},{"border-247-error-text":!!n},"rounded-md","text-lg",{"bg-247-dark-mode-input-bg":c},"font-customRoboto",{"text-white":c},"outline-none")})),Object(g.jsx)("span",{className:"absolute top-1/4 right-5",children:t&&t})]}),n&&Object(g.jsx)("p",{className:"text-sm mt-1 ml-2 text-247-error-text",children:n})]})},v=a(173),y=a(174),w=a(44),N=a(18),C=a(16),S=a.n(C),k=function(e){var t=e.size,a=void 0===t?"small":t;return Object(g.jsx)("div",{className:"w-full flex justify-center",children:Object(g.jsx)("div",{className:S()({"w-6":"small"===a},{"h-6":"small"===a},{"w-12":"large"===a},{"h-12":"large"===a},{"w-16":"v-large"===a},{"h-16":"v-large"===a},"border-247-transparent","rounded-full","border-t-2","border-b-2","animate-spin")})})},I=function(e){var t=e.children,a=e.type,n=e.className,r=e.fullWidth,c=e.isLoading,s=e.handleClick;return Object(g.jsx)("button",{className:["text-white","py-3","rounded-md",r&&"w-full","text-lg","font-bold","font-customRoboto"].concat(Object(N.a)(n)).join(" "),type:a,onClick:s,children:c?Object(g.jsx)(k,{}):t})},A=a.p+"static/media/logo.e6dad76f.png",D=a(7),z=function(e,t,a,r,c){var s=Object(n.createContext)();return{Context:s,Provider:function(i){var o=i.children,l=Object(n.useReducer)(e,t,(function(){if(r){var e=localStorage.getItem("247auth");return e?JSON.parse(e):{}}return Object(j.a)({},t)})),d=Object(D.a)(l,2),u=d[0],p=d[1];Object(n.useEffect)((function(){r&&c(u)}),[u]);var b={};for(var m in a)b[m]=a[m](p);return Object(g.jsx)(s.Provider,{value:Object(j.a)({state:u},b),children:o})}}},T=a(294),_=a.n(T).a.create({baseURL:"https://api.adverts247.com/api"}),E=z((function(e,t){switch(t.type){case"set_loading":return Object(j.a)(Object(j.a)({},e),{},{loading:t.payload});case"signin":return Object(j.a)(Object(j.a)({},e),{},{token:t.payload.token,user:t.payload.user,loggedIn:!0});case"signout":return Object(j.a)(Object(j.a)({},e),{},{token:null,user:null,loggedIn:!1});case"set_error":case"clear_error":return Object(j.a)(Object(j.a)({},e),{},{error:t.payload});default:return e}}),{loading:!1,token:null,user:null,loggedIn:!1,error:null},{loginAdmin:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a,n){var r,c,s,i;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.email,c=a.password,e({type:"set_loading",payload:!0}),t.prev=2,t.next=5,_.post("/admin/signin",{email:r,password:c});case 5:s=t.sent,console.log(s),i=s.data.token,e({type:"signin",payload:{token:i,user:s.data.user}}),l.push(n),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0.response),t.t0.response?e({type:"set_error",payload:t.t0.response.data.error}):e({type:"set_error",payload:"Something went wrong"});case 16:e({type:"set_loading",payload:!1});case 17:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e,a){return t.apply(this,arguments)}}()},clearError:function(e){return function(){e({type:"clear_error",payload:null})}},logout:function(e){return function(){localStorage.removeItem("247auth"),e({type:"signout"}),l.push(d)}}},!0,(function(e){var t={user:e.user,loggedIn:e.loggedIn,token:e.token};localStorage.setItem("247auth",JSON.stringify(t))})),P=E.Context,M=E.Provider,F=a(67),q=a(34),B=function(){var e,t,a={validationSchema:q.b({emailAddress:q.c().email("Must be a valid email").required("Email is required"),password:q.c().min(7).max(255).required("Password is required")})}.validationSchema,r=Object(i.h)().state;console.log(r);var c=Object(n.useContext)(P),s=c.state,o=s.loading,l=s.error,d=s.loggedIn,j=c.loginAdmin,m=c.clearError,h=Object(w.e)({resolver:Object(F.a)(a)}),f=h.register,x=h.handleSubmit,N=h.formState.errors,C=function(){var e=Object(b.a)(Object(p.a)().mark((function e(t){var a,n,c;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(),a=t.emailAddress,n=t.password,c=(null===r||void 0===r?void 0:r.from)||u,e.next=5,j({email:a,password:n},c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return d?Object(g.jsx)(i.a,{to:u}):Object(g.jsxs)("div",{className:"grid grid-cols-6 gap-0 h-screen min-h-screen",children:[Object(g.jsx)("div",{className:"col-span-3 bg-247-main h-full flex",children:Object(g.jsx)("img",{src:A,alt:"logo",width:"340",className:"m-auto"})}),Object(g.jsx)("div",{className:"col-span-3 bg-247-transparent flex",children:Object(g.jsxs)("div",{className:"px-20 w-full items-center m-auto",children:[Object(g.jsx)("h1",{className:"text-5xl font-bold text-247-dark-text font-customRoboto",children:"Sign In"}),Object(g.jsx)("p",{className:"text-2xl text-247-dark-text font-customRoboto font-light mt-1 tracking-wide",children:"Welcome Back"}),Object(g.jsxs)("form",{className:"mt-20",onSubmit:x(C),children:[l&&Object(g.jsx)("p",{className:"font-semibold text-247-error-text",children:l}),Object(g.jsx)(O,{placeholder:"Email Address",type:"email",inputIcon:Object(g.jsx)(v.a,{size:24,color:"#4D4D4D"}),registerFn:f,name:"emailAddress",errorText:null===(e=N.emailAddress)||void 0===e?void 0:e.message}),Object(g.jsx)(O,{placeholder:"Password",type:"password",inputIcon:Object(g.jsx)(y.a,{size:24,color:"#4D4D4D"}),registerFn:f,name:"password",errorText:null===(t=N.password)||void 0===t?void 0:t.message}),Object(g.jsx)(I,{fullWidth:!0,className:["mt-20","bg-247-main"],type:"submit",isLoading:o,children:"Log In"})]})]})})]})},R=a(27),L=a(139),U=a.n(L),V=a(29),W=a.n(V),G=a(40),Q=function(){var e=localStorage.getItem("247auth");return e?JSON.parse(e).token:null},K="set_loading_state",H="set_create_error_message",J="set_retrieve_error_message",Y="set_fetch_by_id_error",X="set_campaign_list",Z="set_campaign_size",$="set_single_campaign",ee="updating_status",te="set_update_status_error",ae="updating_attributes",ne="set_update_attributes_error",re="fetching_active_campaigns",ce="set_active_campaigns",se="set_active_campaigns_size",ie="fetching_total_size",oe="set_total_size",le={fetch:J,create:H,fetchById:Y,updateStatus:te,updateAttributes:ne},de=z((function(e,t){switch(t.type){case K:return Object(j.a)(Object(j.a)({},e),{},{loading:t.payload});case ee:return Object(j.a)(Object(j.a)({},e),{},{updatingStatus:t.payload});case ae:return Object(j.a)(Object(j.a)({},e),{},{updatingAttributes:t.payload});case ne:return Object(j.a)(Object(j.a)({},e),{},{updateAttributesError:t.payload});case te:return Object(j.a)(Object(j.a)({},e),{},{updateStatusError:t.payload});case H:return Object(j.a)(Object(j.a)({},e),{},{createErrorMsg:t.payload});case J:return Object(j.a)(Object(j.a)({},e),{},{retrieveErrorMsg:t.payload});case Y:return Object(j.a)(Object(j.a)({},e),{},{fetchByIdError:t.payload});case X:return Object(j.a)(Object(j.a)({},e),{},{campaigns:t.payload});case Z:return Object(j.a)(Object(j.a)({},e),{},{campaignSize:t.payload});case $:return Object(j.a)(Object(j.a)({},e),{},{campaign:t.payload});case re:return Object(j.a)(Object(j.a)({},e),{},{fetchingActiveCampaigns:t.payload});case ce:return Object(j.a)(Object(j.a)({},e),{},{activeCampaigns:t.payload});case se:return Object(j.a)(Object(j.a)({},e),{},{activeCampaignsSize:t.payload});case ie:return Object(j.a)(Object(j.a)({},e),{},{fetchingTotalSize:t.payload});case oe:return Object(j.a)(Object(j.a)({},e),{},{campaignTotalSize:t.payload});default:return e}}),{loading:!1,campaigns:[],campaign:null,createErrorMsg:null,retrieveErrorMsg:null,fetchByIdError:null,campaignSize:0,updatingStatus:!1,updateStatusError:null,updatingAttributes:!1,updateAttributesError:null,fetchingActiveCampaigns:!1,activeCampaigns:[],activeCampaignsSize:0,campaignTotalSize:0,fetchingTotalSize:!1},{createCampaign:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a,n){return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:K,payload:!0}),t.prev=1,t.next=4,_.post("/campaigns",a,{headers:{Authorization:"Bearer ".concat(Q()),"content-type":"multipart/form-data"}});case 4:e({type:K,payload:!1}),n&&n(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),t.t0.response?(console.log(t.t0.response.data),e({type:H,payload:t.t0.response.data.message||"Unable to create campaign. Something went wrong"})):e({type:H,payload:"Unable to create campaign. Something went wrong"}),e({type:K,payload:!1});case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,a){return t.apply(this,arguments)}}()},fetchCampaigns:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:J,payload:null}),e({type:K,payload:!0}),t.prev=2,t.next=5,_.get("/campaigns",{headers:{Authorization:"Bearer ".concat(Q())},params:Object(j.a)(Object(j.a)({},a),{},{sortBy:"createdAt",orderBy:"desc"})});case 5:n=t.sent,e({type:X,payload:n.data.campaigns}),e({type:Z,payload:n.data.size}),e({type:K,payload:!1}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),t.t0.response?(console.log(t.t0.response.data),e({type:J,payload:t.t0.response.data.message||"Unable to fetch campaigns. Something went wrong"})):e({type:J,payload:"Unable to fetch campaigns. Something went wrong"}),e({type:K,payload:!1});case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()},fetchCampaignById:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:Y,payload:null}),e({type:K,payload:!0}),t.prev=2,t.next=5,_.get("/campaigns/".concat(a),{headers:{Authorization:"Bearer ".concat(Q())}});case 5:n=t.sent,e({type:$,payload:n.data}),e({type:K,payload:!1}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),t.t0.response?e({type:Y,payload:t.t0.response.data.message||"Unable to create campaign. Something went wrong"}):e({type:Y,payload:"Unable to create campaign. Something went wrong"}),e({type:K,payload:!1});case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},clearError:function(e){return function(t){e({type:le[t],payload:null})}},updateCampaignStatus:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a,n,r){return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:ee,payload:!0}),e({type:te,payload:null}),t.prev=2,t.next=5,_.patch("/change-status/".concat(a),n,{headers:{Authorization:"Bearer ".concat(Q())}});case 5:e({type:ee,payload:!1}),r&&r(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),t.t0.response?e({type:te,payload:t.t0.response.data.message||"Unable to update the status of the campaign. Something went wrong"}):e({type:te,payload:"Unable to update the status of the campaign. Something went wrong"}),e({type:ee,payload:!1});case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,a,n){return t.apply(this,arguments)}}()},updateCampaignAttributes:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a,n,r){var c;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:ae,payload:!0}),e({type:ne,payload:null}),t.prev=2,t.next=5,_.patch("campaigns/".concat(n),a,{headers:{Authorization:"Bearer ".concat(Q())}});case 5:c=t.sent,console.log(c.data),e({type:ae,payload:!0}),r&&r(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),t.t0.response?e({type:ne,payload:t.t0.response.data.message||"Unable to update the attributes of the campaign. Something went wrong"}):e({type:ne,payload:"Unable to update the attributes of the campaign. Something went wrong"}),e({type:ae,payload:!1});case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e,a,n){return t.apply(this,arguments)}}()},fetchActiveCampaigns:function(e){return Object(b.a)(Object(p.a)().mark((function t(){var a;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:J,payload:null}),e({type:re,payload:!0}),t.prev=2,t.next=5,_.get("/campaigns",{headers:{Authorization:"Bearer ".concat(Q())},params:{status:"active",sortBy:"createdAt",orderBy:"desc"}});case 5:a=t.sent,e({type:ce,payload:a.data.campaigns}),e({type:se,payload:a.data.size}),e({type:re,payload:!1}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),t.t0.response?(console.log(t.t0.response.data),e({type:J,payload:t.t0.response.data.message||"Unable to fetch campaigns. Something went wrong"})):e({type:J,payload:"Unable to fetch campaigns. Something went wrong"}),e({type:re,payload:!1});case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))},fetchTotalCampaignSize:function(e){return Object(b.a)(Object(p.a)().mark((function t(){var a;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:J,payload:null}),e({type:ie,payload:!0}),t.prev=2,t.next=5,_.get("/campaigns",{headers:{Authorization:"Bearer ".concat(Q())}});case 5:a=t.sent,e({type:oe,payload:a.data.size}),e({type:ie,payload:!1}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),t.t0.response?(console.log(t.t0.response.data),e({type:J,payload:t.t0.response.data.message||"Unable to fetch campaigns. Something went wrong"})):e({type:J,payload:"Unable to fetch campaigns. Something went wrong"}),e({type:ie,payload:!1});case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))}}),ue=de.Context,pe=de.Provider,be="fetching_drivers",je="fetching_single_driver",me="updating_status",he="set_fetch_drivers_error",fe="fetch_single_driver_error",ge="update_status_error",xe="set_drivers_list",Oe="set_single_driver",ve="set_drivers_list_size",ye="fetching_total_size",we="set_drivers_total_size",Ne={fetchDrivers:he,fetchDriverById:fe,updateStatus:ge},Ce=z((function(e,t){switch(t.type){case be:return Object(j.a)(Object(j.a)({},e),{},{fetchingDrivers:t.payload});case je:return Object(j.a)(Object(j.a)({},e),{},{fetchingSingleDriver:t.payload});case me:return Object(j.a)(Object(j.a)({},e),{},{updatingDriverStatus:t.payload});case ge:return Object(j.a)(Object(j.a)({},e),{},{updateStatusError:t.payload});case fe:return Object(j.a)(Object(j.a)({},e),{},{fetchSingleDriverError:t.payload});case he:return Object(j.a)(Object(j.a)({},e),{},{fetchDriversError:t.payload});case Oe:return Object(j.a)(Object(j.a)({},e),{},{driver:t.payload});case xe:return Object(j.a)(Object(j.a)({},e),{},{drivers:t.payload});case ve:return Object(j.a)(Object(j.a)({},e),{},{driverListSize:t.payload});case ye:return Object(j.a)(Object(j.a)({},e),{},{fetchingTotalSize:t.payload});case we:return Object(j.a)(Object(j.a)({},e),{},{driversTotalSize:t.payload});default:return e}}),{fetchingDrivers:!1,fetchingSingleDriver:!1,updatingDriverStatus:!1,drivers:[],driver:null,fetchDriversError:null,fetchSingleDriverError:null,updateStatusError:null,driverListSize:0,fetchingTotalSize:!1,driversTotalSize:0},{fetchDrivers:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:be,payload:!0}),e({type:he,payload:null}),t.prev=2,t.next=5,_.get("/drivers",{headers:{Authorization:"Bearer ".concat(Q())},params:Object(j.a)(Object(j.a)({},a),{},{sortBy:"createdAt",orderBy:"desc"})});case 5:n=t.sent,e({type:xe,payload:n.data.drivers}),e({type:ve,payload:n.data.size}),e({type:be,payload:!1}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),t.t0.response?e({type:he,payload:t.t0.response.data.message||"Unable to fetch drivers. Something went wrong"}):e({type:he,payload:"Unable to fetch drivers. Something went wrong"}),e({type:be,payload:!1});case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()},fetchDriverById:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:je,payload:!0}),e({type:fe,payload:null}),t.prev=2,t.next=5,_.get("/driver/".concat(a),{headers:{Authorization:"Bearer ".concat(Q())}});case 5:n=t.sent,e({type:Oe,payload:n.data.driver}),e({type:je,payload:!1}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),t.t0.response?e({type:fe,payload:t.t0.response.data.message||"Unable to fetch driver. Something went wrong"}):e({type:fe,payload:"Unable to fetch driver. Something went wrong"}),e({type:je,payload:!1});case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},updateDriverStatus:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a,n,r){var c;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:me,payload:!0}),e({type:ge,payload:null}),t.prev=2,t.next=5,_.patch("/driver/change-status?driver=".concat(a),{status:n},{headers:{Authorization:"Bearer ".concat(Q())}});case 5:c=t.sent,console.log(c),r&&r(),e({type:me,payload:!1}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),t.t0.response?e({type:ge,payload:t.t0.response.data.message||"Unable to update driver status. Something went wrong"}):e({type:ge,payload:"Unable to update driver status. Something went wrong"}),e({type:me,payload:!1});case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e,a,n){return t.apply(this,arguments)}}()},clearError:function(e){return function(t){e({type:Ne[t],payload:null})}},getDriversTotalSize:function(e){return Object(b.a)(Object(p.a)().mark((function t(){var a;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:ye,payload:!0}),e({type:he,payload:null}),t.prev=2,t.next=5,_.get("/drivers",{headers:{Authorization:"Bearer ".concat(Q())}});case 5:a=t.sent,e({type:we,payload:a.data.size}),e({type:ye,payload:!1}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),t.t0.response?e({type:he,payload:t.t0.response.data.message||"Unable to fetch drivers. Something went wrong"}):e({type:he,payload:"Unable to fetch drivers. Something went wrong"}),e({type:ye,payload:!1});case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))}}),Se=Ce.Context,ke=Ce.Provider,Ie="loading_revenue",Ae="set_revenue",De="set_revenue_error",ze=z((function(e,t){switch(t.type){case Ie:return Object(j.a)(Object(j.a)({},e),{},{fetchingRevenue:t.payload});case Ae:return Object(j.a)(Object(j.a)({},e),{},{totalRevenue:t.payload});case De:return Object(j.a)(Object(j.a)({},e),{},{fetchRevenueError:t.payload});default:return e}}),{fetchingRevenue:!1,totalRevenue:0,fetchRevenueError:null},{fetchRevenue:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:Ie,payload:!0}),t.prev=1,t.next=4,_.get("/revenue",{headers:{Authorization:"Bearer ".concat(Q())},params:Object(j.a)({},a)});case 4:n=t.sent,e({type:Ae,payload:n.data.totalRevenue}),e({type:Ie,payload:!1}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),t.t0.response?e({type:De,payload:t.t0.response.data.message||"Unable to update the status of the campaign. Something went wrong"}):e({type:De,payload:"Unable to update the status of the campaign. Something went wrong"});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}}),Te=ze.Context,_e=ze.Provider,Ee=a(326),Pe=a(39),Me=a.n(Pe),Fe=a(52),qe=a(54),Be=function(e){var t=e.value,a=e.handleChange;return Object(g.jsxs)("div",{className:"relative",children:[Object(g.jsx)("input",{className:"pr-4 pl-11 py-2 w-72 border border-247-dark-text rounded-md text-lg text-white focus:outline-none focus:ring-1 font-customRoboto bg-transparent",type:"search",placeholder:"Search",value:t,onChange:function(e){return a(e.target.value)}}),Object(g.jsx)("span",{className:"absolute top-1/4 left-3",children:Object(g.jsx)(R.m,{color:"#979797",size:24})})]})},Re=a(96),Le=a(300),Ue=a(301),Ve=[{label:"Overview",icon:Re.a,link:"/overview"},{label:"Campaigns",icon:Re.b,link:"/campaigns"},{label:"Advertisers",icon:v.b,link:"/advertisers"},{label:"Drivers",icon:Le.a,link:"/drivers"},{label:"Content Library",icon:R.o,link:"/content-library"},{label:"Playlist Manager",icon:Ue.a,link:"/playlist-manager"},{label:"Quiz Centre",icon:R.n,link:"/quiz-centre"},{label:"Send Notifs",icon:y.b,link:"/send-notifications"}],We=function(){return Object(g.jsx)("div",{className:"h-12 w-12 rounded-full bg-247-gray flex items-center justify-center border-2 border-247-dark-text cursor-pointer",children:Object(g.jsx)(qe.d,{color:"#212427"})})};function Ge(e){return function(t){var a=Object(n.useState)(!1),r=Object(D.a)(a,2),c=r[0],s=r[1],i=Object(n.useRef)();return Object(n.useEffect)((function(){document.addEventListener("mousedown",(function(e){var t;null!==(t=i.current)&&void 0!==t&&t.contains(e.target)||s(!1)}))}),[i]),Object(g.jsx)(e,Object(j.a)(Object(j.a)({},t),{},{open:c,setOpen:s,ref:i}))}}var Qe=function(e){var t=e.onBtnClick,a=e.title,n=e.icon,r=e.isLoading;return Object(g.jsx)("button",{onClick:t,className:"text-base text-white bg-247-red-shade px-5 py-3 rounded-full flex items-center justify-center",style:{minWidth:"160px"},children:r?Object(g.jsx)(k,{}):Object(g.jsxs)(g.Fragment,{children:[n,a]})})},Ke=a(69),He=a(218),Je=a.n(He),Ye=a(119),Xe=a.n(Ye),Ze=a(302),$e=a.n(Ze),et=a(236),tt=a.n(et);tt.a.setAppElement("#root");var at=function(e){var t=e.modalOpen,a=e.setModalOpen,n=e.children,r=e.width,c=e.cb,s={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"#282C31",border:"1px solid #282C31",borderRadius:"8px",width:r?"".concat(r,"px"):"650px",padding:"28px 32px",maxHeight:"90vh",overflowY:"auto"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.86)"}};return Object(g.jsx)(tt.a,{isOpen:t,style:s,onRequestClose:function(){a(!1),c&&c()},children:n})},nt=a(303),rt=a.n(nt),ct=["label","darkMode","placeholder","startDate","endDate","handleChange","errorText"],st=function(e){var t=e.label,a=e.darkMode,n=e.placeholder,r=e.startDate,c=e.endDate,s=e.handleChange,i=e.errorText,o=Object(m.a)(e,ct);return Object(g.jsxs)("div",{className:"mt-8",children:[t&&Object(g.jsx)("label",{className:"text-base mb-2 font-medium inline-block text-white",children:t}),Object(g.jsxs)("div",{className:S()("relative","rounded-md",{"bg-247-dark-mode-input-bg":a}),children:[Object(g.jsx)(rt.a,Object(j.a)({className:S()("z-20","w-full","py-3"),selectsRange:!0,startDate:r,endDate:c,onChange:function(e){return s(e)},placeholderText:n},o)),Object(g.jsx)(R.g,{className:"absolute top-1/2 left-5 cursor-pointer z-0",style:{transform:"translateY(-50%)"},size:20,color:"#DFDFDF"})]}),i&&Object(g.jsx)("p",{className:"text-sm mt-1 ml-2 text-247-error-text",children:i})]})},it=a(305),ot=["innerProps","cx","data","selectProps","isSelected","isFocused"],lt=function(e){var t=e.innerProps,a=(e.cx,e.data,e.selectProps,e.isSelected),n=e.isFocused,r=Object(m.a)(e,ot);return Object(g.jsxs)("div",Object(j.a)(Object(j.a)(Object(j.a)({className:S()("flex","items-center","px-3","py-3","cursor-pointer","hover:bg-black","hover:text-247-red-straight",{"bg-black":a}),"data-focused":n,"data-selected":a},t),r),{},{children:[Object(g.jsx)("div",{className:"w-5 h-5",children:a&&Object(g.jsx)(R.h,{size:20})}),Object(g.jsx)("label",{className:"ml-3",children:r.label})]}))},dt=function(e){var t=e.label,a=e.standAlone,n=e.bgColor,r=e.borderColor,c=e.options,s=e.value,i=e.darkMode,o=e.errorText,l=e.placeholderText,d=e.handleChange,u={control:function(e,t){return Object(j.a)(Object(j.a)({},e),{},{backgroundColor:t.selectProps.darkMode?"rgba(0, 0, 0, 0.25)":n,borderColor:t.selectProps.darkMode?"#4D4D4D":r,padding:"6px 10px","&:hover":{borderColor:t.selectProps.darkMode?"#4D4D4D":r},"&:focus":{borderColor:t.selectProps.darkMode?"#4D4D4D":r,boxShadow:"none"}})},indicatorSeparator:function(e,t){return Object(j.a)(Object(j.a)({},e),{},{display:"none"})},input:function(e,t){return Object(j.a)(Object(j.a)({},e),{},{fontSize:"1.125rem",fontWeight:"500",color:"#fff"})},placeholder:function(e,t){return Object(j.a)(Object(j.a)({},e),{},{fontWeight:"500",color:"#848b95"})},singleValue:function(e,t){return Object(j.a)(Object(j.a)({},e),{},{fontWeight:"500",color:"#fff"})},menu:function(e,t){return Object(j.a)(Object(j.a)({},e),{},{fontWeight:"500",backgroundColor:t.selectProps.darkMode?"#222222":n,color:"#fff"})}};return Object(g.jsxs)("div",{className:S()({"mt-8":!a}),children:[t&&Object(g.jsx)("label",{className:"inline-block text-white mb-2 font-medium",children:t}),Object(g.jsx)(it.a,{className:"react-select",options:c,placeholder:l,styles:u,darkMode:i,value:s,onChange:d,isSearchable:!1,components:{Option:lt}}),o&&Object(g.jsx)("p",{className:"text-sm mt-1 ml-2 text-247-error-text",children:o})]})},ut=a(26),pt=a(61),bt=a(306),jt=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1;return new Promise((function(n,r){var c,s=document.createElement("video");s.setAttribute("src",t?e:URL.createObjectURL(e)),s.load(),s.addEventListener("error",(function(e){r("error when loading video file",e)})),s.addEventListener("loadedmetadata",(function(){c=s.duration,s.duration<a?r("video is too short."):(setTimeout((function(){s.currentTime=a}),200),s.addEventListener("seeked",(function(){var e=document.createElement("canvas");e.width=s.videoWidth,e.height=s.videoHeight;var t=e.getContext("2d");t.drawImage(s,0,0,e.width,e.height),t.canvas.toBlob((function(e){n({blob:e,duration:c})}),"image/jpeg",.75)})))}))}))},mt={".jpg,.png,.jpeg":"(PNG, AND JPG Files Supported)",".mp4":"(MP4 Files Supported)"},ht=function(e){var t=e.label,a=e.multiple,r=e.callUpdateFilesCb,c=e.accepts,s=e.setDuration,i=e.isEdit,o=e.resetToDefault,l=Object(n.useState)({}),d=Object(D.a)(l,2),u=d[0],m=d[1],h=Object(n.useRef)(null),f=function(){var e=Object(b.a)(Object(p.a)().mark((function e(t){var n,r,c,i,o,l,d,b;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(ut.a)(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=25;break}if(!((c=r.value).size<5e8)){e.next=23;break}if(a){e.next=22;break}if(i="image"===c.type.split("/")[0],o=void 0,!i){e.next=13;break}o=URL.createObjectURL(c),e.next=20;break;case 13:return e.next=15,jt(c);case 15:l=e.sent,d=l.blob,b=l.duration,s&&s(b),o=URL.createObjectURL(d);case 20:return c.preview=o,e.abrupt("return",{file:c});case 22:u[c.name]=c;case 23:e.next=3;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(1),n.e(e.t0);case 30:return e.prev=30,n.f(),e.finish(30);case 33:return e.abrupt("return",Object(j.a)({},u));case 34:case"end":return e.stop()}}),e,null,[[1,27,30,33]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(b.a)(Object(p.a)().mark((function e(t){var a,n;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.target.files).length){e.next=7;break}return e.next=4,f(a);case 4:n=e.sent,m(n),r(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"mt-8",children:[Object(g.jsxs)("label",{className:"mb-2 font-medium inline-block text-white text-base",children:[t," ",Object(g.jsx)("span",{className:"text-xs font-normal ml-3",children:c?mt[c]:"(PNG, JPG, AND MP4 Files Supported)"})]}),Object(g.jsxs)("div",{className:"rounded-md w-full bg-247-dark-mode-input-bg p-4",children:[!Object.keys(u).length&&Object(g.jsxs)("div",{className:"w-full relative rounded-md border border-dashed border-247-dotted-border bg-247-upload-bg flex-col text-center py-5 text-247-placeholder-shade cursor-pointer",children:[Object(g.jsx)("div",{className:"mx-auto inline-block",children:Object(g.jsx)(pt.d,{size:28})}),Object(g.jsxs)("p",{className:"text-sm",children:["Drag and drop or browse to choose ",a?"files":"a file"]}),Object(g.jsx)("input",{type:"file",ref:h,className:"absolute top-0 left-0 bottom-0 right-0 w-full opacity-0 cursor-pointer",onChange:function(e){return x(e)},accept:c||".jpg,.png,.jpeg,.mp4"})]}),!!Object.keys(u).length&&Object(g.jsxs)("div",{className:"rounded-md max-h-52 relative group",children:[Object(g.jsx)("div",{className:"absolute flex items-end justify-end rounded-md w-full h-full group-hover:visible group-hover:bg-247-overlay",children:Object(g.jsxs)("div",{className:"flex items-center space-x-4 mr-5 mb-5",children:[i&&Object(g.jsxs)("button",{className:"bg-white rounded-md opacity-0 group-hover:opacity-100 flex items-center h-10 px-4 text-black",onClick:o,children:[Object(g.jsx)(bt.a,{size:16,color:"#f00",className:"mr-2"}),"Reset"]}),Object(g.jsx)("div",{onClick:function(){m({}),r({})},className:"bg-white flex items-center justify-center cursor-pointer opacity-0 group-hover:opacity-100  w-10 h-10 rounded-md",children:Object(g.jsx)(qe.c,{size:16,color:"#f00"})})]})}),Object.keys(u).map((function(e,t){var a=u[e];return Object(g.jsx)("div",{children:Object(g.jsx)("div",{children:Object(g.jsx)("img",{className:"max-h-52 w-full object-cover rounded-md",src:a.preview,alt:"file preview ".concat(t)})})},e)}))]})]})]})},ft=function(e,t){Object(n.useEffect)((function(){e&&Pe.toast.error(e,{duration:3e3}),setTimeout((function(){return t("create")}),3e3)}),[e])},gt=a(329),xt=["innerProps","cx","data","selectProps","isSelected","isFocused"],Ot=function(e){var t=e.innerProps,a=(e.cx,e.data,e.selectProps,e.isSelected),n=e.isFocused,r=Object(m.a)(e,xt);return Object(g.jsxs)("div",Object(j.a)(Object(j.a)(Object(j.a)({className:S()("flex","items-center","px-2","py-3","cursor-pointer","hover:bg-black","hover:text-247-red-straight",{"bg-black":a}),"data-focused":n,"data-selected":a},t),r),{},{children:[Object(g.jsx)("div",{className:"w-5 h-5",children:a&&Object(g.jsx)(R.h,{size:20})}),Object(g.jsx)("label",{className:"ml-3",children:r.label})]}))},vt=function(e){var t=e.label,a=e.standAlone,n=e.bgColor,r=e.borderColor,c=e.handleChange,s=e.darkMode,i=e.errorText,o=e.placeholderText,l=e.value,d=e.loadOptionFn,u=e.createNewOption,p=e.getOptionLabel,b=e.getOptionValue,m=e.loading,h=e.disabled,f=e.inputValue,x=e.onInputValueChange,O={control:function(e,t){return Object(j.a)(Object(j.a)({},e),{},{backgroundColor:t.selectProps.darkMode&&t.isDisabled?"rgba(0, 0, 0, 0.1)":t.selectProps.darkMode&&!t.isDisabled?"rgba(0, 0, 0, 0.25)":n,borderColor:t.selectProps.darkMode?"#4D4D4D":r,padding:"6px 10px","&:hover":{borderColor:t.selectProps.darkMode?"#4D4D4D":r},"&:focus":{borderColor:t.selectProps.darkMode?"#4D4D4D":r,boxShadow:"none"}})},indicatorSeparator:function(e,t){return Object(j.a)(Object(j.a)({},e),{},{display:"none"})},input:function(e,t){return Object(j.a)(Object(j.a)({},e),{},{fontSize:"1.125rem",fontWeight:"500",color:"#fff"})},placeholder:function(e,t){return Object(j.a)(Object(j.a)({},e),{},{fontWeight:"500",color:"#848b95"})},singleValue:function(e,t){return Object(j.a)(Object(j.a)({},e),{},{fontWeight:"500",color:t.isDisabled?"rgba(255, 255, 255, 0.5)":"#fff"})},menu:function(e,t){return Object(j.a)(Object(j.a)({},e),{},{fontWeight:"500",backgroundColor:t.selectProps.darkMode?"#222222":n,color:"#fff"})}};return Object(g.jsxs)("div",{className:S()({"mt-8":!a}),children:[t&&Object(g.jsx)("label",{className:"inline-block text-white mb-2 font-medium",children:t}),Object(g.jsx)(gt.a,{value:l,inputValue:f,styles:O,darkMode:s,getOptionLabel:p,getOptionValue:b,components:{Option:Ot},cacheOptions:!0,defaultOptions:!0,loadOptions:d,isSearchable:!0,onChange:c,onInputChange:x,onCreateOption:u,isClearable:!0,placeholder:o,isLoading:m,isDisabled:m||h,maxMenuHeight:180}),i&&Object(g.jsx)("p",{className:"text-sm mt-1 ml-2 text-247-error-text",children:i})]})},yt=[{label:"All",id:"all"},{label:"Active",id:"active"},{label:"Closed",id:"closed"},{label:"Paused",id:"paused"}],wt=[{label:"All Types",value:"all"},{label:"Image",value:"image"},{label:"Video",value:"video"}],Nt=[{label:"All",id:"all"},{label:"Active",id:"approved"},{label:"Suspended",id:"suspended"},{label:"Pending",id:"pending"}],Ct=[{value:"image",label:"Image"},{value:"video",label:"Video"}],St="notification::join",kt=function(e){var t=e.imgSrc,a=e.onRemoveExistingMedia,n=e.label;return Object(g.jsxs)("div",{className:"mt-8",children:[Object(g.jsxs)("label",{className:"mb-2 font-medium inline-block text-white text-base",children:[n," ",Object(g.jsx)("span",{className:"text-xs font-normal ml-3",children:"(PNG, JPG, AND MP4 Files Supported)"})]}),Object(g.jsxs)("div",{className:"rounded-md w-full bg-247-dark-mode-input-bg p-4",children:[" ",Object(g.jsxs)("div",{className:"w-full max-h-52 rounded-md relative group",children:[Object(g.jsx)("div",{className:"absolute flex items-end justify-end rounded-md w-full h-full group-hover:visible group-hover:bg-247-overlay",children:Object(g.jsx)("div",{onClick:a,className:"bg-white flex items-center justify-center cursor-pointer opacity-0 group-hover:opacity-100  w-10 h-10 rounded-md mr-5 mb-5",children:Object(g.jsx)(qe.c,{size:16,color:"#f00"})})}),Object(g.jsx)("div",{children:Object(g.jsx)("img",{className:"max-h-52 w-full object-cover rounded-md",src:t,alt:"campaign preview"})})]})]})]})},It=function(e){var t,a,r=e.modalIsOpen,c=e.setIsOpen,s=e.modalWidth,i=e.isEdit,o=e.editData,l=e.editFn,d=e.editing,u=e.fetchCallback,j={validationSchema:q.b({campaignName:q.c().required("Campaign name is required"),duration:q.a().length(2,"select start and end duration").required("Campaign duration is required"),adBudget:q.c().required("Ad Spend is required"),adType:q.b().required("Ad type is required"),advertiser:q.b().required("Advertiser is required").typeError("This field cannot be empty")})}.validationSchema,m=Object(n.useContext)(ue),h=m.createCampaign,f=m.clearError,x=m.state,v=x.loading,y=x.createErrorMsg,N=Object(n.useState)(0),C=Object(D.a)(N,2),S=C[0],k=C[1],A=Object(n.useState)([]),z=Object(D.a)(A,2),T=z[0],E=z[1],P=Object(n.useState)(!1),M=Object(D.a)(P,2),B=M[0],R=M[1],L=Object(n.useState)(""),U=Object(D.a)(L,2),V=U[0],W=U[1],G=Object(n.useState)(!1),K=Object(D.a)(G,2),H=K[0],J=K[1];ft(y,(function(){f("create")}));var Y=Object(w.e)({resolver:Object(F.a)(j),defaultValues:i&&o}),X=Y.register,Z=Y.handleSubmit,$=Y.control,ee=Y.formState.errors,te=Y.setValue,ae=Y.setError,ne=Y.clearErrors,re=function(){var e=Object(b.a)(Object(p.a)().mark((function e(t){var a;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.get("/advertisers".concat(t?"?startsWith=".concat(t):""),{headers:{Authorization:"Bearer ".concat(Q())}});case 2:return a=e.sent,e.abrupt("return",a.data.advertisers);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(b.a)(Object(p.a)().mark((function e(t){var a;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.prev=1,e.next=4,_.post("/advertisers",{companyName:t},{headers:{Authorization:"Bearer ".concat(Q())}});case 4:a=e.sent,R(!1),te("advertiser",a.data),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.response),e.t0.response?ae("advertiser",{message:e.t0.response.data.message||"Unable to create advertiser, try again"}):ae("advertiser",{message:"Unable to create new advertiser, try again"}),R(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(b.a)(Object(p.a)().mark((function e(t){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=5;break}return e.next=3,oe(t);case 3:e.next=7;break;case 5:return e.next=7,ie(t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(b.a)(Object(p.a)().mark((function e(t){var a;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new FormData,!T[0]){e.next=14;break}return a.append("campaignName",t.campaignName),a.append("advertiser",t.advertiser.id),a.append("videoLengthInSeconds",S),a.append("adBudget",parseFloat(t.adBudget.replace(/,/g,""))),a.append("adType",t.adType.value),a.append("duration",JSON.stringify([Object(Ke.default)(t.duration[0],"yyyy-MM-dd"),Object(Ke.default)(t.duration[1],"yyyy-MM-dd")])),a.append("campaignMedia",T[0]),e.next=11,h(a,(function(){return Me.a.success("Campaign created successfully"),u()}));case 11:c(!1),e.next=15;break;case 14:Me.a.error("You need to upload a content for the campaign");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(b.a)(Object(p.a)().mark((function e(t){var a,n,r,s,i;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),a=Je()(t,(function(e,t){return!Xe()(o[t],e)})),!$e()(a)||T[0]){e.next=5;break}return Me.a.error("You haven't made any changes!"),e.abrupt("return");case 5:n=new FormData,e.t0=Object(p.a)().keys(a);case 7:if((e.t1=e.t0()).done){e.next=25;break}r=e.t1.value,e.t2=r,e.next="campaignName"===e.t2?12:"duration"===e.t2?14:"adBudget"===e.t2?17:"adType"===e.t2?20:22;break;case 12:return n.append("campaignName",a[r]),e.abrupt("break",23);case 14:return s=JSON.stringify([Object(Ke.default)(a[r][0],"yyyy-MM-dd"),Object(Ke.default)(a[r][1],"yyyy-MM-dd")]),n.append("duration",s),e.abrupt("break",23);case 17:return i=parseFloat(a[r].replace(/,/g,"")),n.append("adBudget",i),e.abrupt("break",23);case 20:return n.append("adType",a[r].value),e.abrupt("break",23);case 22:return e.abrupt("return");case 23:e.next=7;break;case 25:return T[0]&&n.append("campaignMedia",T[0]),e.next=28,l(n);case 28:c(!1);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)(at,{modalOpen:r,setModalOpen:c,width:s,children:[Object(g.jsx)("h2",{className:"text-2xl text-white text-center font-semibold",children:i?"Edit campaign (".concat(o.campaignName,")"):"Create new campaign"}),Object(g.jsxs)("form",{className:"mt-8",onSubmit:Z(se),children:[Object(g.jsx)(O,{label:"Campaign Name",darkMode:!0,placeholder:"enter campaign name",type:"text",registerFn:X,name:"campaignName",errorText:null===(t=ee.campaignName)||void 0===t?void 0:t.message}),Object(g.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[Object(g.jsx)(w.a,{name:"advertiser",control:$,render:function(e){var t,a=e.field;return Object(g.jsx)(vt,{label:"Advertiser",disabled:i,handleChange:function(e){return a.onChange(e)},darkMode:!0,placeholderText:"Enter advertiser name...",value:a.value,loadOptionFn:re,createNewOption:ce,getOptionLabel:function(e){return e.__isNew__?e.label:e.companyName},getOptionValue:function(e){return e.__isNew__?e.value:e.id},loading:B,errorText:null===(t=ee.advertiser)||void 0===t?void 0:t.message,inputValue:V,onInputValueChange:function(e){ne("advertiser"),W(e)}})}}),Object(g.jsx)(w.a,{name:"duration",control:$,render:function(e){var t,a=e.field;return Object(g.jsx)(st,{label:"Duration",darkMode:!0,placeholder:"Select campaign duration",startDate:a.value&&(null===a||void 0===a?void 0:a.value[0])||null,endDate:a.value&&(null===a||void 0===a?void 0:a.value[1])||null,handleChange:function(e){return a.onChange(e)},errorText:null===(t=ee.duration)||void 0===t?void 0:t.message,minDate:new Date})}})]}),Object(g.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[Object(g.jsx)(O,{label:"Ad Budget",darkMode:!0,placeholder:"enter campaign spend",type:"string",registerFn:X,setValue:te,isNumeric:!0,name:"adBudget",errorText:null===(a=ee.adBudget)||void 0===a?void 0:a.message}),Object(g.jsx)(w.a,{name:"adType",control:$,render:function(e){var t,a=e.field;return Object(g.jsx)(dt,{label:"Ad Type",darkMode:!0,options:Ct,placeholderText:"select ad type",value:a.value,handleChange:function(e){return a.onChange(e)},errorText:null===(t=ee.adType)||void 0===t?void 0:t.message})}})]}),i&&!H?Object(g.jsx)(kt,{label:"Upload Content",imgSrc:o.preview,onRemoveExistingMedia:function(){return J(!0)}}):Object(g.jsx)(ht,{label:"Upload Content",multiple:!1,callUpdateFilesCb:function(e){var t=Object.values(e);E(t)},isEdit:i,resetToDefault:function(){E([]),J(!1)},setDuration:k}),Object(g.jsx)(I,{type:"submit",className:["bg-247-red","block","mt-12","px-12","font-normal"],fullWidth:!0,isLoading:v||d,children:i?"Submit Change":"Create Campaign"})]})]})},At=Object(n.forwardRef)((function(e,t){var a=e.children,r=e.open,c=e.setOpen,s=e.customHeader,o=e.fetchCampaignsFn,l=Object(i.h)(),d=Object(n.useContext)(P),u=d.state.user,p=d.logout;Object(n.useEffect)((function(){var e=Object(Ee.a)("https://2ec4-2001-4dd6-af6b-0-28b6-820a-ab86-f642.ngrok.io/notifier");e.on("connect",(function(){e.emit(St,u.id)}))}),[]);var b=Object(n.useState)(!1),j=Object(D.a)(b,2),m=j[0],h=j[1];return Object(g.jsxs)("div",{className:"h-screen max-h-screen overflow-y-hidden",children:[Object(g.jsx)(Pe.Toaster,{position:"top-center"}),Object(g.jsxs)("div",{className:"grid grid-cols-5 gap-0 max-h-screen h-screen",children:[Object(g.jsxs)("div",{className:"h-screen min-h-screen border-r-2 border-247-dark-text bg-247-secondary",children:[Object(g.jsx)("img",{src:A,alt:"logo",width:"160",className:"ml-10 mt-10"}),Object(g.jsx)("ul",{className:"ml-10 mt-20",children:Ve.map((function(e){return l.pathname.includes(e.link)?Object(g.jsx)("li",{className:"py-5",children:Object(g.jsx)(Fe.a,{to:e.link,children:Object(g.jsxs)("span",{className:"flex items-center space-x-6",children:[Object(g.jsx)(e.icon,{size:22,color:"#FF0000"}),Object(g.jsx)("span",{className:"text-white text-xl font-customRoboto",children:e.label})]})})}):Object(g.jsx)("li",{className:"py-5",children:Object(g.jsx)(Fe.a,{to:e.link,children:Object(g.jsxs)("span",{className:"flex items-center space-x-6",children:[Object(g.jsx)(e.icon,{size:22,color:"#959698"}),Object(g.jsx)("span",{className:"text-247-inactive-link text-xl font-customRoboto",children:e.label})]})})})}))})]}),Object(g.jsxs)("div",{className:"col-span-4 w-full h-screen min-h-screen bg-247-main px-10 py-10",children:[s||Object(g.jsxs)("div",{className:"flex items-center justify-between pb-4",children:[Object(g.jsx)(Be,{}),Object(g.jsxs)("div",{className:"flex space-x-8 items-center",children:[Object(g.jsx)(Qe,{onBtnClick:function(){return h(!0)},title:"Create Campaign",icon:Object(g.jsx)(R.a,{className:"mr-2",size:22})}),Object(g.jsxs)("div",{className:"relative cursor-pointer",children:[Object(g.jsx)(R.d,{color:"#979797",size:28}),Object(g.jsx)("div",{className:"w-3 h-3 border-2 border-247-main rounded-full bg-red-500 absolute top-0 right-0"})]}),Object(g.jsxs)("div",{className:"flex items-center",children:[Object(g.jsx)(We,{}),Object(g.jsxs)("div",{className:"relative",ref:t,children:[Object(g.jsx)("div",{children:Object(g.jsx)(qe.a,{color:"#EBEBEB",className:"ml-2 cursor-pointer",onClick:function(){c(!r)}})}),Object(g.jsx)("ul",{className:"absolute top-7 text-right bg-247-secondary border -right-3 border-247-dark-text p-0 transition-all translate-y-3 origin-top-right",children:Object(g.jsx)("li",{className:f()("list-none","text-white","py-2","px-6","z-20",{"opacity-0":!r},{"opacity-100":r},{visible:r},{hidden:!r},"cursor-pointer"),onClick:p,children:"Logout"})})]})]})]})]}),Object(g.jsx)("div",{className:"overflow-y-scroll max-h-full scrollbar-hide",children:a})]})]}),Object(g.jsx)(It,{setIsOpen:h,modalIsOpen:m,modalWidth:704,fetchCallback:o})]})})),Dt=Ge(At),zt=a(576),Tt=a(577),_t=a(330),Et=a(581),Pt=a(318),Mt=a(319),Ft=a(155),qt=function(e){var t=e.data,a=e.yDataKey,n=e.xDataKey;return Object(g.jsx)(zt.a,{width:"100%",height:300,children:Object(g.jsxs)(Tt.a,{data:t,margin:{top:5,right:20,bottom:5,left:0},children:[Object(g.jsx)(_t.a,{type:"monotone",dataKey:a,stroke:"#4FB81D"}),Object(g.jsx)(Et.a,{stroke:"#4d4d4d",strokeDasharray:"5 5"}),Object(g.jsx)(Pt.a,{dataKey:n}),Object(g.jsx)(Mt.a,{}),Object(g.jsx)(Ft.a,{})]})})},Bt=function(e){var t=e.checked,a=e.iconColor,n=e.name,r=e.value,c=e.handleChange;return Object(g.jsxs)("div",{className:"flex justify-center items-center",children:[Object(g.jsx)("input",{type:"checkbox",name:n,id:n,value:r,checked:t,className:"invisible w-0 h-0",onChange:c}),Object(g.jsxs)("label",{className:S()([{"text-xl":!!r},{"font-bold":!!r},{"ml-3":!!r},{"text-247-gray-accent2":!!r},"flex","items-center"]),htmlFor:n,children:[t?Object(g.jsx)(R.i,{color:a,className:S()([{"mr-2":r},"toggle-check"])}):Object(g.jsx)(R.j,{color:a,className:S()([{"mr-2":r},"toggle-check"])}),r]})]})},Rt=[{date:"31/01",impressions:730,interactions:240},{date:"01/02",impressions:1560,interactions:350},{date:"02/02",impressions:722,interactions:190},{date:"03/02",impressions:3e3,interactions:780},{date:"04/02",impressions:750,interactions:320},{date:"05/02",impressions:1510,interactions:488},{date:"06/02",impressions:2880,interactions:590},{date:"07/02",impressions:889,interactions:286}],Lt=[{id:"quiz-001",question:"Which one of these afrobeats artistes won a grammy in 2021?",answers:1500,correctAnswer:20,correctOption:"C"},{id:"quiz-002",question:"What year did Nigeria gain her independence?",answers:1500,correctAnswer:35,correctOption:"A"},{id:"quiz-003",question:"What is the capital of Tanzania?",answers:500,correctAnswer:59,correctOption:"D"},{id:"quiz-004",question:"One of these songs is by Wizkid, pick one",answers:1300,correctAnswer:20,correctOption:"A"},{id:"quiz-005",question:"Which one of these afrobeats artistes won a grammy in 2021?",answers:1250,correctAnswer:25,correctOption:"C"},{id:"quiz-006",question:"What year did Nigeria gain her independence?",answers:2e3,correctAnswer:40,correctOption:"B"},{id:"quiz-007",question:"Which one of these afrobeats artistes won a grammy in 2021?",answers:1700,correctAnswer:21,correctOption:"A"}],Ut=function(e,t,a){return e>9999&&e<1e6?a?t?e.toLocaleString("en-NG",{currency:"NGN",style:"currency",maximumFractionDigits:2,minimumFractionDigits:2}):e.toLocaleString("en-NG"):"".concat(t?(e/1e3).toLocaleString("en-NG",{currency:"NGN",style:"currency",maximumFractionDigits:0}):(e/1e3).toLocaleString("en-NG")," K"):e>=1e6?"".concat(t?(e/1e6).toLocaleString("en-NG",{currency:"NGN",style:"currency",maximumFractionDigits:2,minimumFractionDigits:2}):(e/1e6).toLocaleString("en-NG")," M"):t?e.toLocaleString("en-NG",{currency:"NGN",style:"currency",maximumFractionDigits:2,minimumFractionDigits:2}):e.toLocaleString("en-NG")},Vt=function(e){var t=parseInt(e,10),a=Math.floor(t/3600),n=Math.floor((t-3600*a)/60),r=t-3600*a-60*n,c=a<10?"0".concat(a):a,s=n<10?"0".concat(n):n,i=r<10?"0".concat(r):r;return"".concat(c,":").concat(s,":").concat(i)},Wt=function(e){var t=parseInt(e,10),a=Math.floor(t/60),n=t-60*a,r=a<10?"0".concat(a):a,c=n<10?"0".concat(n):n;return"".concat(r,":").concat(c)},Gt=function(e){var t=e.split(":");return 60*parseInt(t[0])+parseInt(t[1])},Qt=function(e){return e/100},Kt=function(e){var t=e.color,a=void 0===t?"#045684":t;return Object(g.jsxs)("svg",{width:"161",height:"130",viewBox:"0 0 161 130",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(g.jsx)("g",{filter:"url(#filter0_d_217_1150)",children:Object(g.jsx)("path",{d:"M1 112C38.8667 97.8023 120.28 55.7256 143 1",stroke:a,strokeWidth:"5"})}),Object(g.jsx)("defs",{children:Object(g.jsxs)("filter",{id:"filter0_d_217_1150",x:"0.122314",y:"0.0414124",width:"160.187",height:"129.299",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[Object(g.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Object(g.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Object(g.jsx)("feOffset",{dx:"8",dy:"8"}),Object(g.jsx)("feGaussianBlur",{stdDeviation:"3.5"}),Object(g.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),Object(g.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Object(g.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_217_1150"}),Object(g.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_217_1150",result:"shape"})]})})]})},Ht=function(e){var t=e.color,a=void 0===t?"#035524":t;return Object(g.jsxs)("svg",{width:"163",height:"112",viewBox:"0 0 163 112",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(g.jsx)("g",{filter:"url(#filter0_d_217_1170)",children:Object(g.jsx)("path",{d:"M1 3C45.3333 6.33333 136.2 29.6 145 96",stroke:a,strokeWidth:"5"})}),Object(g.jsx)("defs",{children:Object(g.jsxs)("filter",{id:"filter0_d_217_1170",x:"0.8125",y:"0.50705",width:"161.666",height:"110.821",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[Object(g.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),Object(g.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Object(g.jsx)("feOffset",{dx:"8",dy:"8"}),Object(g.jsx)("feGaussianBlur",{stdDeviation:"3.5"}),Object(g.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),Object(g.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),Object(g.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_217_1170"}),Object(g.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_217_1170",result:"shape"})]})})]})},Jt=(a(238),a(239),function(e,t){var a=new URLSearchParams(window.location.search);return t?a.set(e,t):a.delete(e),a.toString()}),Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=Object(i.h)(),a=new URLSearchParams(t.search);return a.get(e)||void 0},Xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=Object(i.g)(),a=Object(n.useCallback)((function(a){var n=Jt(e,a);t.replace("".concat(t.location.pathname).concat(n?"?".concat(n):""))}),[t,e]);return a},Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=Yt(e),a=Xt(e);return[t,a]},$t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0,a=Zt(e),n=Object(D.a)(a,2),r=n[0],c=n[1];return[r||t,c]},ea=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-DD",a=Zt(e),r=Object(D.a)(a,2),c=r[0],s=r[1],i=Object(n.useMemo)((function(){var e=W()(c);return c&&e.isValid()?e:void 0}),[c]),o=Object(n.useCallback)((function(e){s(e?e.format(t):void 0)}),[t,s]);return[i,o]},ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0,a=ea(e),n=Object(D.a)(a,2),r=n[0],c=n[1];return[r||t,c]},aa=W()().subtract(12,"M"),na=W()(),ra={startDate:aa,endDate:na},ca=function(){return Object(g.jsx)("div",{children:Object(g.jsx)(G.a,{width:"100%",height:"160px",shape:"rect",colorEnd:"#1A1C1F",colorStart:"#1D2023"})})},sa=function(e){var t=e.statName,a=e.statInfo,n=e.bgColor,r=e.statChange,c=e.indicatorColor;return Object(g.jsxs)("div",{className:"px-9 py-8 w-full bg-bottom ".concat(n," bg-cover rounded-md border border-247-box-border col-span-1 relative"),children:[Object(g.jsx)("h3",{className:"text-white font-customRoboto text-2xl",children:t}),Object(g.jsxs)("div",{className:"mt-12 flex relative items-center",children:[Object(g.jsx)("h2",{className:"text-white font-bold text-5xl",children:a}),r>0?Object(g.jsx)(R.f,{className:"absolute left-56 text-247-increment-green",size:48}):Object(g.jsx)(R.e,{className:"absolute left-56 text-247-decrement-red",size:48})]}),Object(g.jsx)("div",{className:"absolute top-1/2 right-10 mt-2",style:{transform:"translateY(-50%)"},children:r>0?Object(g.jsx)(Kt,{color:c}):Object(g.jsx)(Ht,{color:c})})]})},ia=function(){var e=Object(n.useState)(!0),t=Object(D.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),s=Object(D.a)(c,2),i=s[0],o=s[1],l=Object(n.useContext)(ue),d=l.state,u=d.fetchingTotalSize,j=d.campaignTotalSize,m=d.activeCampaignsSize,h=d.fetchingActiveCampaigns,f=l.fetchTotalCampaignSize,x=l.fetchActiveCampaigns,O=Object(n.useContext)(Te),v=O.state,y=v.fetchingRevenue,w=v.totalRevenue,N=O.fetchRevenue,C=Object(n.useContext)(Se),S=C.state,k=S.driverListSize,I=S.fetchingDrivers,A=C.fetchDrivers,z=Object(n.useMemo)((function(){return u||h||I||y}),[h,I,y,u]);Object(n.useEffect)((function(){Object(b.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([x(),f(),A({status:"approved"}),N()]);case 2:case"end":return e.stop()}}),e)})))()}),[]);var T=ta("startDate",ra.startDate),_=Object(D.a)(T,2),E=_[0],P=_[1],M=ta("endDate",ra.endDate),F=Object(D.a)(M,2),q=F[0],B=F[1],L=function(){a&&(r(!1),o(!0)),i&&(o(!1),r(!0))};return Object(n.useEffect)((function(){U()('button[name="daterange"]').daterangepicker({opens:"left",ranges:{"Last 7 Days":[W()().subtract(6,"days"),W()()],"Last 14 Days":[W()().subtract(13,"days"),W()()],"Last 30 Days":[W()().subtract(29,"days"),W()()],"Last 3 months":[W()().subtract(3,"M"),W()()],"Last 12 months":[W()().subtract(12,"M"),W()()],"Month to date":[W()().startOf("month"),W()()],"All time":[W()().subtract(2,"Y"),W()()]},startDate:E,endDate:q,alwaysShowCalendars:!0,applyButtonClasses:"range-apply-btn"},(function(e,t,a){P(e),B(t)}))}),[]),Object(g.jsxs)(Dt,{pageTitle:"Overview",children:[Object(g.jsxs)("div",{className:"flex items-center w-full justify-between",children:[Object(g.jsxs)("div",{className:"mt-16 mb-8",children:[Object(g.jsx)("h2",{className:"text-4xl text-white",children:"Hello, Welcome back"}),Object(g.jsx)("p",{className:"text-white text-base",children:"Today is Sunday, 22 February"})]}),Object(g.jsx)("div",{className:"flex",children:Object(g.jsxs)("button",{className:"bg-transparent px-5 py-3 rounded-md text-white border border-white flex items-center text-base",name:"daterange",children:[Object(g.jsx)(R.g,{size:20,className:"mr-3"}),"Set Date Filter"]})})]}),z?Object(g.jsx)("div",{className:"grid grid-cols-2 gap-8",children:Array.from({length:4},(function(e,t){return t+1})).map((function(e){return Object(g.jsx)(ca,{},e)}))}):Object(g.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[Object(g.jsx)(sa,{indicatorColor:"#045684",bgColor:"bg-blue-gradient",statChange:5.23,statInfo:Ut(j),statName:"Total Campaigns"}),Object(g.jsx)(sa,{indicatorColor:"#035524",bgColor:"bg-green-gradient",statChange:-1.08,statInfo:Ut(m),statName:"Active Campaigns"}),Object(g.jsx)(sa,{indicatorColor:"#000000",bgColor:"bg-yellow-gradient",statChange:1.75,statInfo:Ut(k),statName:"Active Drivers"}),Object(g.jsx)(sa,{indicatorColor:"#21A0AA",bgColor:"bg-orange-gradient",statChange:1.75,statInfo:Ut(Qt(w),!0),statName:"Total Revenue"})]}),Object(g.jsxs)("div",{className:"mt-10 mb-20 w-full bg-247-secondary rounded-md border-2 border-247-dark-text pl-6 pr-10 py-10",children:[Object(g.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[Object(g.jsx)("h3",{className:"text-white font-customRoboto text-2xl font-medium",children:"Impressions"}),Object(g.jsx)("div",{className:"flex items-center",children:Object(g.jsxs)("div",{className:"flex items-center",children:[Object(g.jsx)(Bt,{checked:a,handleChange:L,name:"total",value:"Total",iconColor:"#4FB81D"}),Object(g.jsx)(Bt,{checked:i,handleChange:L,name:"perDay",value:"Per day",iconColor:"#FF0000"})]})})]}),Object(g.jsx)(qt,{data:Rt,xDataKey:"date",yDataKey:"impressions"})]})]})},oa=a(181),la=function(e){var t=e.infoTitle,a=e.infoValue,n=e.bgColor,r=e.statChange,c=e.btnText,s=e.btnAction;return Object(g.jsxs)("div",{className:"".concat(n," rounded-lg border-2 border-247-dark-text py-8 px-7 flex flex-col items-start justify-between"),children:[Object(g.jsx)("h4",{className:"text-white font-customRoboto font-medium text-xl",children:t}),Object(g.jsxs)("div",{className:"mt-4 flex items-center relative",children:[Object(g.jsx)("h2",{className:"font-customRoboto text-white text-3xl font-medium",children:a}),r&&(r>0?Object(g.jsx)(R.f,{className:"absolute left-48 text-247-increment-green",size:40}):Object(g.jsx)(R.e,{className:"absolute left-48 text-247-decrement-red",size:40}))]}),c&&Object(g.jsx)("button",{onClick:function(){return s()},className:"text-lg font-semibold px-7 py-2 bg-white rounded mt-4",children:c})]})},da="set_loading_state",ua="creating_advertiser",pa="set_create_error",ba="set_fetch_error",ja="set_fetch_by_id_error",ma="set_advertiser_list",ha="set_advertiser_size",fa="set_single_advertiser",ga="fetching_total_size",xa="set_total_size",Oa={fetch:ba,fetchById:ja,createAdvertiser:pa},va=z((function(e,t){switch(t.type){case da:return Object(j.a)(Object(j.a)({},e),{},{loading:t.payload});case ba:return Object(j.a)(Object(j.a)({},e),{},{fetchError:t.payload});case ja:return Object(j.a)(Object(j.a)({},e),{},{fetchByIdError:t.payload});case ma:return Object(j.a)(Object(j.a)({},e),{},{advertisers:t.payload});case ha:return Object(j.a)(Object(j.a)({},e),{},{advertiserSize:t.payload});case fa:return Object(j.a)(Object(j.a)({},e),{},{advertiser:t.payload});case ua:return Object(j.a)(Object(j.a)({},e),{},{creatingAdvertiser:t.payload});case pa:return Object(j.a)(Object(j.a)({},e),{},{createAdvertiserError:t.payload});case ga:return Object(j.a)(Object(j.a)({},e),{},{fetchingTotalSize:t.payload});case xa:return Object(j.a)(Object(j.a)({},e),{},{advertiserTotalSize:t.payload});default:return e}}),{loading:!1,creatingAdvertiser:!1,fetchError:null,fetchByIdError:null,createAdvertiserError:null,advertisers:[],advertiserSize:0,advertiser:null,advertiserTotalSize:0,fetchingTotalSize:!1},{fetchAdvertisers:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:da,payload:!0}),e({type:ba,payload:null}),e({type:ma,payload:[]}),t.prev=3,t.next=6,_.get("/advertisers",{headers:{Authorization:"Bearer ".concat(Q())},params:Object(j.a)(Object(j.a)({},a),{},{sortBy:"createdAt",orderBy:"desc"})});case 6:n=t.sent,e({type:ma,payload:n.data.advertisers}),e({type:ha,payload:n.data.size}),e({type:da,payload:!1}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),t.t0.response?e({type:ba,payload:t.t0.response.data.message||"Unable to fetch advertisers. Something went wrong"}):e({type:ba,payload:"Unable to fetch advertisers. Something went wrong"}),e({type:da,payload:!1});case 16:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}()},fetchAdvertiserById:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a),e({type:da,payload:!0}),e({type:ja,payload:null}),t.prev=3,t.next=6,_.get("/advertisers/".concat(a),{headers:{Authorization:"Bearer ".concat(Q())}});case 6:n=t.sent,e({type:fa,payload:n.data}),e({type:da,payload:!1}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),t.t0.response?e({type:ja,payload:t.t0.response.data.message||"Unable to fetch particular advertiser. Something went wrong"}):e({type:ja,payload:"Unable to fetch particular advertiser. Something went wrong"}),e({type:da,payload:!1});case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}()},fetchTotalAdvertisersSize:function(e){return Object(b.a)(Object(p.a)().mark((function t(){var a;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:ga,payload:!0}),e({type:ba,payload:null}),t.prev=2,t.next=5,_.get("/advertisers",{headers:{Authorization:"Bearer ".concat(Q())}});case 5:a=t.sent,e({type:xa,payload:a.data.size}),e({type:ga,payload:!1}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),t.t0.response?e({type:ba,payload:t.t0.response.data.message||"Unable to fetch advertisers. Something went wrong"}):e({type:ba,payload:"Unable to fetch advertisers. Something went wrong"}),e({type:ga,payload:!1});case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))},createAdvertiser:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:ua,payload:!0}),e({type:pa,payload:null}),t.prev=2,t.next=5,_.post("/advertisers",a,{headers:{Authorization:"Bearer ".concat(Q())}});case 5:n=t.sent,console.log(n.data),e({type:ua,payload:!1}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),t.t0.response?e({type:pa,payload:t.t0.response.data.message||"Unable to create advertiser. Something went wrong"}):e({type:pa,payload:"Unable to create advertiser. Something went wrong"}),e({type:ua,payload:!1});case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},clearError:function(e){return function(t){e({type:Oa[t],payload:null})}}}),ya=va.Context,wa=va.Provider,Na=function(e,t,a,r){var c=Object(n.useMemo)((function(){return e*t}),[e,t]),s=Object(n.useMemo)((function(){return c-t}),[c,t]),i=Object(n.useMemo)((function(){return a.slice(s,c)}),[s,c,a]),o=Math.ceil(r/t);return{currentList:i,indexOfFirstItem:s,indexOfLastItem:c,pages:o}},Ca=function(e){var t=e.headers,a=e.children,n=e.loadingData;return Object(g.jsxs)("table",{className:"font-customRoboto w-full text-white border-collapse relative",children:[Object(g.jsx)("thead",{children:Object(g.jsx)("tr",{className:"border border-247-dark-text bg-247-red-straight",children:t.map((function(e,t){return Object(g.jsx)("th",{className:S()("text-left","py-4","text-lg",{"px-2":0===t},{"px-6":0!==t}),children:e},"".concat(e,"_").concat(t))}))})}),Object(g.jsx)("tbody",{className:S()({"h-48":n}),children:a})]})},Sa=a(83),ka=function(e){var t=e.visibleRows,a=e.setActivePage,n=e.setVisibleRows,r=e.firstItem,c=e.pages,s=e.activePage,i=e.dataLength,o=e.lastItem;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"flex items-center",children:[Object(g.jsx)("p",{className:"text-247-gray-accent2 mr-4 font-customRoboto text-base",children:"Show rows:"}),Object(g.jsxs)("select",{name:"rows",id:"rows",value:t,onChange:function(e){a(1),n(e.target.value)},className:"px-3 py-1 font-customRoboto text-247-gray-accent2 bg-transparent border-2 rounded-sm focus:outline-none focus:ring-1 border-247-dark-text",children:[Object(g.jsx)("option",{value:5,children:"5"}),Object(g.jsx)("option",{value:10,children:"10"}),Object(g.jsx)("option",{value:15,children:"15"})]})]}),Object(g.jsxs)("div",{className:"flex ml-16 items-center",children:[Object(g.jsx)("p",{className:"text-base text-247-gray-accent2",children:"".concat(r," - ").concat(c===s?i:o," of ").concat(i)}),Object(g.jsxs)("div",{className:"ml-3",children:[Object(g.jsx)("button",{onClick:1===s?null:function(){a(s-1)},className:"px-3 rounded-l-md py-1 border-2 border-247-dark-text",children:Object(g.jsx)(Sa.a,{size:20,color:"#CACACA"})}),Object(g.jsx)("button",{onClick:c===s?null:function(){a(s+1)},className:"px-3 rounded-r-md py-1 border-2 border-l-0 border-247-dark-text",children:Object(g.jsx)(Sa.b,{size:20,color:"#CACACA"})})]})]})]})},Ia=a(320),Aa=function(e){var t=e.title,a=e.subtitle;return Object(g.jsx)("div",{className:"w-full flex justify-center items-center",children:Object(g.jsxs)("div",{className:"flex flex-col items-center",children:[Object(g.jsx)(Ia.a,{size:60,color:"#d1d1d1"}),Object(g.jsx)("h4",{className:"text-white font-semibold text-2xl mt-5",children:t}),Object(g.jsx)("p",{className:"mt-2 text-gray-300",children:a})]})})},Da=function(e){var t=e.title,a=e.subtitle;return Object(g.jsx)("div",{className:"w-full flex justify-center items-center",children:Object(g.jsxs)("div",{className:"flex flex-col items-center",children:[Object(g.jsx)(Sa.c,{size:60,color:"#d1d1d1"}),Object(g.jsx)("h4",{className:"text-white font-semibold text-2xl mt-5",children:t}),Object(g.jsx)("p",{className:"mt-2 text-gray-300",children:a})]})})},za=function(e){return e.campaigns.map((function(e){var t,a;return(null===e||void 0===e||null===(t=e.campaignStat)||void 0===t||null===(a=t.adSpend)||void 0===a?void 0:a.amountInKobo)||0})).reduce((function(e,t){return e+t}),0)},Ta=function(e){return e.campaigns.map((function(e){return e.campaignStat.impressions})).reduce((function(e,t){return e+t}),0)},_a=function(){return Object(g.jsx)("div",{children:Object(g.jsx)(G.a,{width:"100%",height:"140px",shape:"rect",colorEnd:"#1A1C1F",colorStart:"#1D2023"})})},Ea=["","Advertiser","No. of Campaigns","Total Impressions","Total Spend","Total Duration"],Pa=function(){var e=Object(n.useState)([]),t=Object(D.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(1),s=Object(D.a)(c,2),o=s[0],l=s[1],d=Object(n.useState)(5),u=Object(D.a)(d,2),m=u[0],h=u[1],f=Object(i.g)(),x=Object(n.useContext)(ue),O=x.state,v=O.fetchingTotalSize,y=O.campaignTotalSize,w=x.fetchTotalCampaignSize,C=Object(n.useContext)(Te),S=C.state,I=S.fetchingRevenue,A=S.totalRevenue,z=C.fetchRevenue,T=Object(n.useContext)(ya),_=T.state,E=_.loading,P=_.advertisers,M=_.advertiserSize,F=_.fetchError,q=_.advertiserTotalSize,B=_.fetchingTotalSize,R=T.fetchAdvertisers,L=T.fetchTotalAdvertisersSize,U=Object(n.useMemo)((function(){return B||v||I}),[v,B,I]);Object(n.useEffect)((function(){Object(b.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([L(),w(),z()]);case 2:case"end":return e.stop()}}),e)})))()}),[]);var V=Object(n.useMemo)((function(){return{limit:m,skip:(o-1)*m}}),[m,o]);Object(n.useEffect)((function(){R(Object(j.a)({},V))}),[V]);var W=Na(o,m,P,M),G=W.indexOfFirstItem,Q=W.indexOfLastItem,K=W.pages;return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(Dt,{pageTitle:"Advertisers",children:[U?Object(g.jsx)("div",{className:"grid grid-cols-3 gap-6 mt-16",children:Array.from({length:3},(function(e,t){return t+1})).map((function(e){return Object(g.jsx)(_a,{},e)}))}):Object(g.jsxs)("div",{className:"grid grid-cols-3 gap-6 mt-16",children:[Object(g.jsx)(la,{bgColor:"bg-blue-gradient",infoTitle:"No. of Advertisers",infoValue:Ut(q)}),Object(g.jsx)(la,{bgColor:"bg-green-gradient",infoTitle:"Total Revenue",infoValue:Ut(Qt(A),!0)}),Object(g.jsx)(la,{bgColor:"bg-yellow-gradient",infoTitle:"Total Campaigns",infoValue:Ut(y,!1,!0)})]}),Object(g.jsxs)("div",{className:"mt-16 rounded-md bg-black border-2 border-247-dark-text mb-10",children:[Object(g.jsxs)(Ca,{headers:Ea,loadingData:E,children:[E&&Object(g.jsx)("div",{className:"flex items-center justify-center w-full absolute py-14",children:Object(g.jsx)(k,{size:"large"})}),!E&&P.length>0&&P.map((function(e,t){var n=Ta(e),c=za(e),s=e.campaigns.map((function(e){return Object(oa.a)(new Date(e.duration[1]),new Date(e.duration[0]))})).reduce((function(e,t){return e+t}),0),i=Vt(s);return Object(g.jsxs)("tr",{onClick:function(t){t.target.closest(".toggle-check")||f.push({pathname:"/advertiser/".concat(e.advertiserId)})},className:a.includes(t)?"text-lg bg-gray-700 border border-247-dark-text cursor-pointer hover:bg-gray-700":"text-lg border border-247-dark-text odd:bg-247-dark-accent3 cursor-pointer hover:bg-gray-700",children:[Object(g.jsx)("td",{className:"px-3 py-5 toggle-check",children:Object(g.jsx)(Bt,{checked:!!a.includes(t),iconColor:"#CACACA",name:e.id.toLowerCase(),handleChange:function(){return function(e){if(a.includes(e)){var t=a.indexOf(e),n=Object(N.a)(a);n.splice(t,1),r(n)}else r([].concat(Object(N.a)(a),[e]))}(t)}})}),Object(g.jsx)("td",{className:"px-6 py-5",children:Object(g.jsx)("div",{className:"flex items-center",children:e.companyName})}),Object(g.jsx)("td",{className:"px-6 py-5",children:Object(g.jsxs)("div",{className:"flex items-center",children:[Number(e.campaigns.length).toLocaleString("en-US")," "]})}),Object(g.jsx)("td",{className:"px-6 py-5",children:Number(n).toLocaleString("en-US")}),Object(g.jsx)("td",{className:"px-6 py-5",children:Number(Qt(c)).toLocaleString("en-NG",{currency:"NGN",style:"currency",minimumFractionDigits:2,maximumFractionDigits:2})}),Object(g.jsx)("td",{className:"px-6 py-5",children:i})]},e.id)}))]}),!E&&!F&&0===P.length&&Object(g.jsx)("div",{className:"w-full py-9",children:Object(g.jsx)(Aa,{title:"No Campaign Found",subtitle:"We cannot find any campaign that fits your criteria."})}),!E&&F&&Object(g.jsx)("div",{className:"w-full py-9",children:Object(g.jsx)(Da,{title:"Error Retrieving Campaigns",subtitle:F})})]}),Object(g.jsx)("div",{className:"flex items-center justify-end mb-20",children:P&&P.length>0&&Object(g.jsx)(ka,{activePage:o,dataLength:M,firstItem:G+1,lastItem:Q,pages:K,setActivePage:l,setVisibleRows:h,visibleRows:m})})]})})},Ma=a(127),Fa=a.n(Ma),qa=a(58),Ba=a.n(qa),Ra=function(e){var t=e.defaultFilters,a=e.filterList,n=e.activeFilter,r=e.setActiveFilter;return Object(g.jsx)("div",{className:"bg-247-tab-bg rounded-lg p-3",children:Object(g.jsx)("ul",{className:"flex text-white gap-3 text-lg",children:a.map((function(e){var a=e.label,c=e.id;return Object(g.jsx)("li",{children:Object(g.jsx)("button",{onClick:function(){c===t.status?r(void 0):r(c)},className:f()("py-1","px-2","rounded-md",{"bg-247-tab-bg":c!==n},{"bg-247-red-straight":c===n}),children:a})},c)}))})})},La=a(104),Ua=a.n(La),Va=function(e){var t=e.defaultFilters,a=e.statusFilters,r=e.typeFilters,c=e.selectedStatusFilter,s=e.setSelectedStatusFilter,i=e.selectedTypeFilter,o=e.setSelectedTypeFilter,l=e.startDate,d=e.endDate,u=e.setStartDate,p=e.setEndDate;return Object(n.useEffect)((function(){U()('button[name="campaign-daterange"]').daterangepicker({opens:"left",ranges:{"Last 7 Days":[W()().subtract(6,"days"),W()()],"Last 14 Days":[W()().subtract(13,"days"),W()()],"Last 30 Days":[W()().subtract(29,"days"),W()()],"Last 3 months":[W()().subtract(3,"M"),W()()],"Last 12 months":[W()().subtract(12,"M"),W()()],"Month to date":[W()().startOf("month"),W()()],"All time":[W()().subtract(2,"Y"),W()()]},startDate:l,endDate:d,alwaysShowCalendars:!0,applyButtonClasses:"range-apply-btn"},(function(e,t,a){u(e),p(t)}))}),[]),Object(g.jsxs)("div",{className:"flex pt-3 px-8 mb-3 items-stretch justify-between",children:[Object(g.jsx)(Ra,{defaultFilters:t,filterList:a,activeFilter:c,setActiveFilter:s}),Object(g.jsx)("div",{className:"w-40 flex items-center bg-247-tab-bg justify-center rounded-lg",children:Object(g.jsx)("div",{className:"w-full",children:Object(g.jsx)(dt,{standAlone:!0,options:r,value:Ua()(r,{value:i}),handleChange:function(e){return e.value===t.type?o(void 0):o(e.value)},bgColor:"#222",borderColor:"#222"})})}),Object(g.jsxs)("button",{name:"campaign-daterange",className:"flex items-center bg-247-tab-bg p-4 rounded-lg text-white text-base font-semibold",children:[Object(g.jsx)(R.g,{size:20,className:"mr-3"}),"Set Date Filter"]})]})},Wa=a(328),Ga=a(321),Qa=function(e,t){return Object(Ga.a)(new Date(e),new Date(t))},Ka=function(e){return Object(Ke.default)(new Date(e),"dd MMM, yyyy")},Ha=function(e){Object.assign({},e);return Object(g.jsxs)("div",{className:"py-10 h-full",children:[Object(g.jsxs)("div",{className:"grid grid-cols-3 space-x-4 mt-6",children:[Object(g.jsx)("div",{children:Object(g.jsx)(G.a,{width:"100%",height:"20vh",shape:"rect",colorEnd:"#1A1C1F",colorStart:"#1D2023"})}),Object(g.jsx)("div",{children:Object(g.jsx)(G.a,{width:"100%",height:"20vh",shape:"rect",colorEnd:"#1A1C1F",colorStart:"#1D2023"})}),Object(g.jsx)("div",{children:Object(g.jsx)(G.a,{width:"100%",height:"20vh",shape:"rect",colorEnd:"#1A1C1F",colorStart:"#1D2023"})})]}),Object(g.jsx)("div",{className:"mt-6",children:Object(g.jsx)(G.a,{width:"100%",height:"30vh",shape:"rect",colorEnd:"#1A1C1F",colorStart:"#1D2023"})}),Object(g.jsx)("div",{className:"mt-6",children:Object(g.jsx)(G.a,{width:"100%",height:"10vh",shape:"rect",colorEnd:"#1A1C1F",colorStart:"#1D2023"})}),Object(g.jsx)("div",{className:"mt-6",children:Object(g.jsx)(G.a,{width:"100%",height:"15vh",shape:"rect",colorEnd:"#1A1C1F",colorStart:"#1D2023"})})]})},Ja=["","Campaign Name","Status","Advertiser","Impressions","Duration","Ad Spend"],Ya=W()().subtract(12,"M"),Xa=W()(),Za=function(e){var t=e.advertiserName,a=e.goToPrevPage;return Object(g.jsxs)("div",{className:"flex items-center justify-between",children:[Object(g.jsxs)("div",{className:"flex items-center",children:[Object(g.jsx)("button",{onClick:a,className:"bg-transparent border-0 outline-none focus:outline-none",children:Object(g.jsx)(R.c,{color:"#f00",size:28})}),Object(g.jsx)("div",{className:"ml-14 flex items-center",children:Object(g.jsx)("h3",{className:"text-2xl text-247-gray font-semibold",children:t})})]}),Object(g.jsx)(Qe,{title:"Download report",icon:Object(g.jsx)(pt.b,{className:"mr-2",size:22}),onBtnClick:function(){return console.log("Handle report downloading")}})]})},$a={status:"all",type:"all",startDate:Ya,endDate:Xa},en=function(){var e=Object(i.g)(),t=Object(i.i)().advertiserId,a=Object(n.useState)(1),r=Object(D.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)(5),l=Object(D.a)(o,2),d=l[0],u=l[1],p=Object(n.useState)([]),b=Object(D.a)(p,2),m=b[0],h=b[1],x=$t("status",$a.status),O=Object(D.a)(x,2),v=O[0],y=O[1],w=$t("type",$a.type),C=Object(D.a)(w,2),S=C[0],I=C[1],A=ta("startDate",$a.startDate),z=Object(D.a)(A,2),T=z[0],_=z[1],E=ta("endDate",$a.endDate),P=Object(D.a)(E,2),M=P[0],F=P[1],q=Object(n.useContext)(ya),B=q.state,R=B.loading,L=B.advertiser,U=q.fetchAdvertiserById;Object(n.useEffect)((function(){U(t)}),[]);var V=Object(n.useMemo)((function(){if(L)return{totalAdSpend:za(L),totalImpression:Ta(L)}}),[L]),W=Object(n.useMemo)((function(){return L?{status:v,type:S,advertiser:L.id,startDate:Object(Ke.default)(T.toDate(),"yyyy/MM/dd"),endDate:Object(Ke.default)(M.toDate(),"yyyy/MM/dd")}:{}}),[v,S,L,T,M]),G=Object(n.useMemo)((function(){return{limit:d,skip:(c-1)*d}}),[d,c]),Q=Object(n.useContext)(ue),K=Q.fetchCampaigns,H=Q.state,J=H.loading,Y=H.campaignSize,X=H.campaigns,Z=H.retrieveErrorMsg;Object(n.useEffect)((function(){if(L){var e=Fa()(W,(function(e){return e&&"all"===e}));K(Object(j.a)(Object(j.a)({},e),G))}}),[W,G,L,T,M]);var $=Na(c,d,X,Y),ee=$.indexOfFirstItem,te=$.indexOfLastItem,ae=$.pages;return L&&Object(g.jsx)(Dt,{customHeader:Object(g.jsx)(Za,{goToPrevPage:function(){return e.push("/advertisers")},advertiserName:null===L||void 0===L?void 0:L.companyName}),children:R?Object(g.jsx)(Ha,{}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"mt-20 grid grid-cols-3 gap-6",children:[Object(g.jsx)(la,{bgColor:"bg-blue-gradient",infoTitle:"Total No. of Campaigns",infoValue:null===L||void 0===L?void 0:L.campaigns.length}),Object(g.jsx)(la,{bgColor:"bg-green-gradient",infoTitle:"Total Spend",infoValue:Ut(Qt(V.totalAdSpend),!0,!0)}),Object(g.jsx)(la,{bgColor:"bg-yellow-gradient",infoTitle:"Total Impressions",infoValue:Ut(V.totalImpression,!1,!0)})]}),Object(g.jsxs)("div",{className:"mt-16 bg-black rounded-md border-2 border-247-dark-text mb-10",children:[Object(g.jsx)(Va,{defaultFilters:$a,setSelectedStatusFilter:y,setSelectedTypeFilter:I,selectedStatusFilter:v,selectedTypeFilter:S,statusFilters:yt,typeFilters:wt,startDate:T,endDate:M,setStartDate:_,setEndDate:F}),Object(g.jsxs)(Ca,{headers:Ja,loadingData:J,children:[J&&Object(g.jsx)("div",{className:"flex items-center justify-center w-full absolute py-14",children:Object(g.jsx)(k,{size:"large"})}),!J&&X.length>0&&X.map((function(e,t){var a,n,r=Qa(e.duration[1],e.duration[0]);return Object(g.jsxs)("tr",{className:m.includes(t)?"text-lg bg-gray-700 border border-247-dark-text cursor-pointer hover:bg-gray-700":"text-lg border border-247-dark-text odd:bg-247-dark-accent3 cursor-pointer hover:bg-gray-700",children:[Object(g.jsx)("td",{className:"px-3 py-5",children:Object(g.jsx)(Bt,{checked:!!m.includes(t),iconColor:"#CACACA",name:e.id.toLowerCase(),handleChange:function(){return function(e){if(m.includes(e)){var t=m.indexOf(e),a=Object(N.a)(m);a.splice(t,1),h(a)}else h([].concat(Object(N.a)(m),[e]))}(t)}})}),Object(g.jsx)("td",{className:"px-6 py-5",children:Object(g.jsx)("div",{className:"flex items-center ",children:e.campaignName})}),Object(g.jsx)("td",{className:"px-6 py-5",children:Object(g.jsxs)("div",{className:"flex items-center gap-3",children:[Object(g.jsx)("div",{className:f()("rounded-full","w-4","h-4",{"bg-active-gradient":"active"===e.status},{"bg-closed-gradient":"closed"===e.status},{"bg-paused-gradient":"paused"===e.status})}),Ba()(e.status)]})}),Object(g.jsx)("td",{className:"px-6 py-5",children:e.advertiser.companyName}),Object(g.jsx)("td",{className:"px-6 py-5",children:Number(e.campaignStat.impressions).toLocaleString("en-NG")}),Object(g.jsx)("td",{className:"px-6 py-5",children:"".concat(r," ").concat(r>1?"days":"day")}),Object(g.jsx)("td",{className:"px-6 py-5",children:Number(Qt((null===e||void 0===e||null===(a=e.campaignStat)||void 0===a||null===(n=a.adSpend)||void 0===n?void 0:n.amountInKobo)||0)).toLocaleString("en-NG",{style:"currency",currency:"NGN"})})]},"campaign".concat(e.id))}))]}),!J&&!Z&&0===X.length&&Object(g.jsx)("div",{className:"w-full py-9",children:Object(g.jsx)(Aa,{title:"No Campaign Found",subtitle:"We cannot find any campaign that fits your criteria."})}),!J&&Z&&Object(g.jsx)("div",{className:"w-full py-9",children:Object(g.jsx)(Da,{title:"Error Retrieving Campaigns",subtitle:Z})})]}),Object(g.jsx)("div",{className:"flex items-center justify-end mb-20",children:X&&X.length>0&&Object(g.jsx)(ka,{activePage:c,dataLength:Y,firstItem:ee+1,lastItem:te,pages:ae,setActivePage:s,setVisibleRows:u,visibleRows:d})})]})})},tn=a(322),an=function(e){var t=e.defaultFilters,a=e.statusFilters,n=e.selectedStatusFilter,r=e.setSelectedStatusFilter,c=e.navigateToPayoutRequests;return Object(g.jsxs)("div",{className:"flex pt-3 px-8 mb-3 items-center justify-between",children:[Object(g.jsx)(Ra,{defaultFilters:t,filterList:a,activeFilter:n,setActiveFilter:r}),Object(g.jsx)(Qe,{title:"See payout requests",onBtnClick:c})]})},nn="fetching_payout_requests",rn="set_payout_requests",cn="set_payout_list_size",sn="set_fetch_payouts_error",on="fetching_total_settled",ln="fetch_settled_error",dn="set_total_settled",un="fetching_total_pending",pn="fetch_pending_error",bn="set_total_pending",jn=z((function(e,t){switch(t.type){case nn:return Object(j.a)(Object(j.a)({},e),{},{fetchingPayouts:t.payload});case rn:return Object(j.a)(Object(j.a)({},e),{},{payoutRequests:t.payload});case cn:return Object(j.a)(Object(j.a)({},e),{},{payoutsListSize:t.payload});case sn:return Object(j.a)(Object(j.a)({},e),{},{fetchPayoutsError:t.payload});case on:return Object(j.a)(Object(j.a)({},e),{},{fetchingTotalSettled:t.payload});case ln:return Object(j.a)(Object(j.a)({},e),{},{fetchSettledError:t.payload});case dn:return Object(j.a)(Object(j.a)({},e),{},{totalSettled:t.payload});case un:return Object(j.a)(Object(j.a)({},e),{},{fetchingTotalPending:t.payload});case pn:return Object(j.a)(Object(j.a)({},e),{},{fetchPendingError:t.payload});case bn:return Object(j.a)(Object(j.a)({},e),{},{totalPending:t.payload});default:return e}}),{fetchingPayouts:!1,payoutRequests:[],payoutsListSize:0,fetchPayoutsError:null,fetchingTotalSettled:!1,totalSettled:0,fetchSettledError:null,fetchingTotalPending:!1,totalPending:0,fetchPendingError:null},{fetchPayoutRequests:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:nn,payload:!0}),e({type:sn,payload:null}),t.prev=2,t.next=5,_.get("/payouts",{headers:{Authorization:"Bearer ".concat(Q())},params:Object(j.a)({},a)});case 5:n=t.sent,e({type:nn,payload:!1}),e({type:rn,payload:n.data.payouts}),e({type:cn,payload:n.data.size}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),t.t0.response?e({type:sn,payload:t.t0.response.data.message||"Unable to fetch payout requests. Something went wrong"}):e({type:sn,payload:"Unable to fetch payout requests. Something went wrong"}),e({type:nn,payload:!1});case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()},getTotalSettledPayouts:function(e){return Object(b.a)(Object(p.a)().mark((function t(){var a,n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:on,payload:!0}),e({type:ln,payload:null}),t.prev=2,t.next=5,_.get("/payouts",{headers:{Authorization:"Bearer ".concat(Q())},params:{status:"success"}});case 5:a=t.sent,n=a.data.payouts.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0),console.log(a.data.payouts),e({type:on,payload:!1}),e({type:dn,payload:n}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),t.t0.response?e({type:ln,payload:t.t0.response.data.message||"Unable to fetch payout requests. Something went wrong"}):e({type:ln,payload:"Unable to fetch payout requests. Something went wrong"}),e({type:on,payload:!1});case 16:case"end":return t.stop()}}),t,null,[[2,12]])})))},getTotalPendingPayouts:function(e){return Object(b.a)(Object(p.a)().mark((function t(){var a,n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:un,payload:!0}),e({type:pn,payload:null}),t.prev=2,t.next=5,_.get("/payouts",{headers:{Authorization:"Bearer ".concat(Q())},params:{status:"pending"}});case 5:a=t.sent,n=a.data.payouts.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0),e({type:un,payload:!1}),e({type:bn,payload:n}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),t.t0.response?e({type:pn,payload:t.t0.response.data.message||"Unable to fetch payout requests. Something went wrong"}):e({type:pn,payload:"Unable to fetch payout requests. Something went wrong"}),e({type:un,payload:!1});case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))}}),mn=jn.Context,hn=jn.Provider,fn=function(){return Object(g.jsx)("div",{children:Object(g.jsx)(G.a,{width:"100%",height:"140px",shape:"rect",colorEnd:"#1A1C1F",colorStart:"#1D2023"})})},gn=["","Driver","Status","Location","Total Trips","Total Earnings","Pending Payout"],xn={status:"all"},On=function(){var e=Object(n.useState)([]),t=Object(D.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(1),s=Object(D.a)(c,2),o=s[0],l=s[1],d=Object(n.useState)(5),u=Object(D.a)(d,2),m=u[0],h=u[1],f=$t("status",xn.status),x=Object(D.a)(f,2),O=x[0],v=x[1],y=Object(n.useMemo)((function(){return{status:O}}),[O]),w=Object(n.useMemo)((function(){return{limit:m,skip:(o-1)*m}}),[m,o]);console.log(Object(tn.a)(new Date("2022-08-06T00:00:00.000+00:00"),new Date("2022-08-03T00:00:00.000+00:00")));var C=Object(n.useContext)(mn),I=C.state,A=I.fetchingTotalSettled,z=I.totalSettled,T=I.fetchingTotalPending,_=I.totalPending,E=C.getTotalSettledPayouts,P=C.getTotalPendingPayouts,M=Object(n.useContext)(Se),F=M.state,q=F.fetchingDrivers,B=F.drivers,R=F.fetchDriversError,L=F.driverListSize,U=F.fetchingTotalSize,V=F.driversTotalSize,W=M.fetchDrivers,G=M.getDriversTotalSize,Q=Object(n.useMemo)((function(){return U||A||T}),[U,A,T]);Object(n.useEffect)((function(){Object(b.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([G(),E(),P()]);case 2:case"end":return e.stop()}}),e)})))()}),[]),Object(n.useEffect)((function(){var e=Fa()(y,(function(e){return e&&"all"===e}));W(Object(j.a)(Object(j.a)({},e),w))}),[y,w]);var K=Na(o,m,B,L),H=K.indexOfFirstItem,J=K.indexOfLastItem,Y=K.pages,X=Object(i.g)();return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(Dt,{pageTitle:"Drivers",children:[Q?Object(g.jsx)("div",{className:"grid grid-cols-3 gap-6 mt-16",children:Array.from({length:3},(function(e,t){return t+1})).map((function(e){return Object(g.jsx)(fn,{},e)}))}):Object(g.jsxs)("div",{className:"grid grid-cols-3 gap-6 mt-16",children:[Object(g.jsx)(la,{bgColor:"bg-blue-gradient",infoTitle:"Total No. of Drivers",infoValue:Ut(V,!1,!0)}),Object(g.jsx)(la,{bgColor:"bg-green-gradient",infoTitle:"Settled Payout",infoValue:Ut(Qt(z),!0,!0)}),Object(g.jsx)(la,{bgColor:"bg-yellow-gradient",infoTitle:"Pending Payout",infoValue:Ut(Qt(_),!0,!0)})]}),Object(g.jsxs)("div",{className:"mt-10 bg-247-secondary rounded-md border-2 border-247-dark-text mb-10",children:[Object(g.jsx)(an,{defaultFilters:xn,selectedStatusFilter:O,setSelectedStatusFilter:v,statusFilters:Nt,navigateToPayoutRequests:function(){return X.push("/pending-payouts")}}),Object(g.jsxs)(Ca,{headers:gn,loadingData:q,children:[q&&Object(g.jsx)("div",{className:"flex items-center justify-center w-full absolute py-14",children:Object(g.jsx)(k,{size:"large"})}),!q&&B.length>0&&B.map((function(e,t){var n,c,s=(null===e||void 0===e||null===(n=e.driverStat)||void 0===n?void 0:n.trips.length)||0,i=e.driverStat?e.driverStat.earnings.map((function(e){return e.amountInKobo})).reduce((function(e,t){return e+t}),0):0,o=(null===e||void 0===e||null===(c=e.driverStat)||void 0===c?void 0:c.pendingPayout)||0;return Object(g.jsxs)("tr",{onClick:function(t){t.target.closest(".toggle-check")||X.push({pathname:"/driver/".concat((null===e||void 0===e?void 0:e.driverId)||e.id)})},className:a.includes(t)?"text-lg bg-gray-700 border border-247-dark-text cursor-pointer hover:bg-gray-700":"text-lg border border-247-dark-text odd:bg-247-dark-accent3 cursor-pointer hover:bg-gray-700",children:[Object(g.jsx)("td",{className:"px-3 py-5 toggle-check",children:Object(g.jsx)(Bt,{checked:!!a.includes(t),iconColor:"#CACACA",name:e.id.toLowerCase(),handleChange:function(){return function(e){if(a.includes(e)){var t=a.indexOf(e),n=Object(N.a)(a);n.splice(t,1),r(n)}else r([].concat(Object(N.a)(a),[e]))}(t)}})}),Object(g.jsx)("td",{className:"px-6 py-5",children:Object(g.jsxs)("div",{children:[e.name,Object(g.jsx)("span",{className:"block text-sm font-light",children:e.email})]})}),Object(g.jsx)("td",{className:"px-6 py-5",children:Object(g.jsxs)("div",{className:"flex items-center gap-3",children:[Object(g.jsx)("div",{className:S()("rounded-full","w-4","h-4",{"bg-active-gradient":"approved"===e.status},{"bg-closed-gradient":"suspended"===e.status},{"bg-paused-gradient":"pending"===e.status})}),Ba()("approved"===e.status?"active":e.status)]})}),Object(g.jsx)("td",{className:"px-6 py-5",children:e.city}),Object(g.jsx)("td",{className:"px-6 py-5",children:Ut(s,!1,!0)}),Object(g.jsx)("td",{className:"px-6 py-5",children:Ut(Qt(i),!0)}),Object(g.jsx)("td",{className:"px-6 py-5",children:Ut(Qt(o),!0,!0)})]},"driver_".concat(e.id))}))]}),!q&&!R&&0===B.length&&Object(g.jsx)("div",{className:"w-full py-9",children:Object(g.jsx)(Aa,{title:"No Campaign Found",subtitle:"We cannot find any campaign that fits your criteria."})}),!q&&R&&Object(g.jsx)("div",{className:"w-full py-9",children:Object(g.jsx)(Da,{title:"Error Retrieving Campaigns",subtitle:R})})]}),Object(g.jsx)("div",{className:"flex items-center justify-end mb-20",children:B&&B.length>0&&Object(g.jsx)(ka,{activePage:o,dataLength:L,firstItem:H+1,lastItem:J,pages:Y,setActivePage:l,setVisibleRows:h,visibleRows:m})})]})})},vn=a(323),yn=a(184),wn="fetching_lifetime_earning",Nn="set_lifetime_earning",Cn="fetch_lifetime_error",Sn="fetching_day_earning",kn="set_day_earning",In="fetch_day_earning_error",An=z((function(e,t){switch(t.type){case wn:return Object(j.a)(Object(j.a)({},e),{},{fetchingLifetimeEarning:t.payload});case Nn:return Object(j.a)(Object(j.a)({},e),{},{lifetimeEarning:t.payload});case Cn:return Object(j.a)(Object(j.a)({},e),{},{fetchLifetimeError:t.payload});case Sn:return Object(j.a)(Object(j.a)({},e),{},{fetchingDayEarning:t.payload});case kn:return Object(j.a)(Object(j.a)({},e),{},{dayEarning:t.payload});case In:return Object(j.a)(Object(j.a)({},e),{},{fetchDayEarningError:t.payload});default:return e}}),{fetchingLifetimeEarning:!1,fetchLifetimeError:null,lifetimeEarning:0,fetchingDayEarning:!1,fetchDayEarningError:null,dayEarning:0},{getDriverLifetimeEarning:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:wn,payload:!0}),t.prev=1,t.next=4,_.get("/earnings/".concat(a),{headers:{Authorization:"Bearer ".concat(Q())}});case 4:n=t.sent,e({type:wn,payload:!1}),e({type:Nn,payload:n.data.totalEarning}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),t.t0.response?e({type:Cn,payload:t.t0.response.data.message||"Unable to retrieve driver's earnings. Something went wrong"}):e({type:Cn,payload:"Unable to retrieve driver's earnings. Something went wrong"}),e({type:wn,payload:!1});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},getDriverDayEarning:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:Sn,payload:!0}),t.prev=1,t.next=4,_.get("/earnings/".concat(a),{headers:{Authorization:"Bearer ".concat(Q())},params:{period:"day"}});case 4:n=t.sent,e({type:kn,payload:n.data.totalEarning}),e({type:Sn,payload:!1}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),t.t0.response?e({type:In,payload:t.t0.response.data.message||"Unable to retrieve driver's earnings. Something went wrong"}):e({type:In,payload:"Unable to retrieve driver's earnings. Something went wrong"}),e({type:Sn,payload:!1});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}}),Dn=An.Context,zn=An.Provider,Tn=function(e){var t=e.label,a=e.value,n=e.last,r=e.valueColor;return Object(g.jsxs)("div",{className:S()("text-white",{"mb-7":!n}),children:[Object(g.jsx)("h5",{className:"text-base font-light mb-2",children:t}),Object(g.jsx)("h3",{className:"text-xl font-medium",style:r&&{color:r},children:a})]})},_n=function(e){var t=e.open,a=e.setOpen,n=e.icon,r=e.text,c=e.handleConfirmation,s=e.processingConfirm;return Object(g.jsx)(at,{modalOpen:t,setModalOpen:a,children:Object(g.jsxs)("div",{className:"text-center",children:[Object(g.jsx)("div",{className:"mx-auto inline-block",children:n}),Object(g.jsx)("p",{className:"text-white text-2xl mt-5 font-medium",children:r}),Object(g.jsxs)("div",{className:"flex items-center justify-center mt-6 gap-7",children:[Object(g.jsx)("button",{onClick:c,className:"text-white bg-247-red-straight px-5 py-2 rounded-md font-medium text-base",children:s?Object(g.jsx)(k,{}):"Yes"}),Object(g.jsx)("button",{onClick:function(){return a(!1)},className:"text-247-campaign-preview-title bg-white px-5 py-2 rounded-md font-medium",children:"No"})]})]})})},En=function(e){var t,a,r,c,s,i,o,l,d=e.isOpen,u=e.setIsOpen,p=e.isEdit,b=e.editData,j=e.submitAction,m=q.b({firstName:q.c().required("First name is required"),lastName:q.c().required("Last name is required"),emailAddress:q.c().email("Enter a valid email address").required("Email is required"),phoneNumber:q.c().length(11).required("Phone number is required"),favouriteMeal:q.c().required("Required field"),hobby:q.c().required("Required field"),askMeAbout:q.c().required("Required field"),vacationSpot:q.c().required("Required field")}),h=Object(w.e)({resolver:Object(F.a)(m)}),f=h.handleSubmit,x=h.formState.errors,v=h.register,y=h.reset;return Object(n.useEffect)((function(){y(b)}),[b]),Object(g.jsxs)(at,{modalOpen:d,setModalOpen:u,width:704,children:[Object(g.jsx)("h2",{className:"text-white text-center text-2xl font-semibold",children:"Edit Contact Info"}),Object(g.jsxs)("form",{className:"mt-10",onSubmit:f(j),children:[Object(g.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[Object(g.jsx)(O,{label:"First Name",darkMode:!0,placeholder:"enter first name",type:"text",registerFn:v,name:"firstName",errorText:null===(t=x.firstName)||void 0===t?void 0:t.message}),Object(g.jsx)(O,{label:"Last Name",darkMode:!0,placeholder:"enter last name",type:"text",registerFn:v,name:"lastName",errorText:null===(a=x.lastName)||void 0===a?void 0:a.message})]}),Object(g.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[Object(g.jsx)(O,{label:"Email Address",darkMode:!0,placeholder:"enter email address",type:"text",registerFn:v,name:"emailAddress",errorText:null===(r=x.emailAddress)||void 0===r?void 0:r.message}),Object(g.jsx)(O,{label:"Phone Number",darkMode:!0,placeholder:"enter phone number",type:"text",registerFn:v,name:"phoneNumber",errorText:null===(c=x.phoneNumber)||void 0===c?void 0:c.message})]}),Object(g.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[Object(g.jsx)(O,{label:"Favourite Meal",darkMode:!0,placeholder:"enter favourite meal",type:"text",registerFn:v,name:"favouriteMeal",errorText:null===(s=x.favouriteMeal)||void 0===s?void 0:s.message}),Object(g.jsx)(O,{label:"Hobby",darkMode:!0,placeholder:"enter hobby",type:"text",registerFn:v,name:"hobby",errorText:null===(i=x.hobby)||void 0===i?void 0:i.message})]}),Object(g.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[Object(g.jsx)(O,{label:"Ask Me About",darkMode:!0,placeholder:"what are you passionate about?",type:"text",registerFn:v,name:"askMeAbout",errorText:null===(o=x.askMeAbout)||void 0===o?void 0:o.message}),Object(g.jsx)(O,{label:"Vacation Spot",darkMode:!0,placeholder:"enter your vacation spot",type:"text",registerFn:v,name:"vacationSpot",errorText:null===(l=x.vacationSpot)||void 0===l?void 0:l.message})]}),Object(g.jsx)(I,{type:"submit",className:["bg-247-red","block","mt-12","px-12","font-normal"],fullWidth:!0,children:p?"Save Changes":"Create New Driver"})]})]})},Pn=function(e){var t=e.isOpen,a=e.setIsOpen,n=e.payouts;return Object(g.jsxs)(at,{modalOpen:t,setModalOpen:a,children:[Object(g.jsx)("h2",{className:"text-white text-center text-2xl font-semibold",children:"Payout History"}),Object(g.jsx)("div",{className:"mt-14 w-full",children:Object(g.jsx)("ul",{children:n.map((function(e){return Object(g.jsx)("li",{className:"odd:bg-247-dark-accent3 even:bg-black first:rounded-t-lg last:rounded-b-lg",children:Object(g.jsxs)("div",{className:"py-4 px-7 grid grid-cols-4 items-center gap-4 ",children:[Object(g.jsxs)("div",{className:"col-span-2",children:[Object(g.jsx)("h4",{className:"text-white text-base font-semibold",children:Ut(Qt(e.amount),!0,!0)}),Object(g.jsx)("p",{className:"text-247-timestamp-color text-sm font-semibold",children:(t=e.createdAt,Object(Ke.default)(new Date(t),"MMM dd, yyyy | HH:mm:ss"))})]}),Object(g.jsx)("div",{className:"col-span-1",children:Object(g.jsx)("button",{className:S()("text-base","px-4","py-2","rounded","text-white","bg-247-red-straight","disabled:bg-247-inactive-btn","disabled:cursor-not-allowed"),disabled:"success"===e.status,children:"Settle"})}),Object(g.jsx)("div",{className:"col-span-1",children:Object(g.jsx)("p",{className:S()("text-base","font-bold",{"text-247-red-straight":"pending"===e.status},{"text-247-increment-green":"success"===e.status}),children:Ba()(e.status)})})]})});var t}))})}),Object(g.jsxs)("div",{className:"flex items-center justify-between mt-9",children:[Object(g.jsx)("button",{onClick:function(){return a(!1)},className:"text-base text-white font-semibold py-3 px-5 rounded bg-247-red-straight",children:"Close"}),Object(g.jsxs)("div",{children:[Object(g.jsx)("button",{onClick:function(){return console.log("go to previous page...")},className:"px-3 rounded-l-md py-1 border-2 border-247-dark-text",children:Object(g.jsx)(Sa.a,{size:20,color:"#CACACA"})}),Object(g.jsx)("button",{onClick:function(){return console.log("go to next page...")},className:"px-3 rounded-r-md py-1 border-2 border-l-0 border-247-dark-text",children:Object(g.jsx)(Sa.b,{size:20,color:"#CACACA"})})]})]})]})},Mn=function(e){var t,a,r,c,s=e.isOpen,i=e.setIsOpen,o=e.driverDeets,l=e.handlePayout,d=q.b({bankName:q.c().required("Bank name is required"),accountNumber:q.c().length(10).required("Account number is required"),accountName:q.c().required("Account name is required"),pendingPayout:q.c().required("Enter an amount to payout")}),u=Object(w.e)({resolver:Object(F.a)(d)}),p=u.register,b=u.handleSubmit,j=u.reset,m=u.formState.errors;return Object(n.useEffect)((function(){j(o)}),[o]),Object(g.jsxs)(at,{modalOpen:s,setModalOpen:i,width:704,children:[Object(g.jsx)("h2",{className:"text-center text-white text-2xl font-semibold",children:"Settle Payout"}),Object(g.jsxs)("form",{className:"mt-10",onSubmit:b(l),children:[Object(g.jsx)(O,{label:"Bank Name",darkMode:!0,placeholder:"enter bank name",type:"text",registerFn:p,name:"bankName",errorText:null===(t=m.bankName)||void 0===t?void 0:t.message}),Object(g.jsx)(O,{label:"Account Number",darkMode:!0,placeholder:"enter account number",type:"text",registerFn:p,name:"accountNumber",errorText:null===(a=m.accountNumber)||void 0===a?void 0:a.message}),Object(g.jsx)(O,{label:"Account Name",darkMode:!0,placeholder:"enter account name",type:"text",registerFn:p,name:"accountName",errorText:null===(r=m.accountName)||void 0===r?void 0:r.message}),Object(g.jsx)(O,{label:"Pending Payout",darkMode:!0,placeholder:"enter amount to payout",type:"text",registerFn:p,name:"pendingPayout",errorText:null===(c=m.pendingPayout)||void 0===c?void 0:c.message}),Object(g.jsx)(I,{type:"submit",className:["bg-247-red","block","mt-12","px-12","font-normal"],fullWidth:!0,children:"Payout"})]})]})},Fn=function(e){Object.assign({},e);return Object(g.jsxs)("div",{className:"py-10 h-full",children:[Object(g.jsx)("div",{className:"mt-6",children:Object(g.jsx)(G.a,{width:"100%",height:"35vh",shape:"rect",colorEnd:"#1A1C1F",colorStart:"#1D2023"})}),Object(g.jsx)("div",{className:"mt-6",children:Object(g.jsx)(G.a,{width:"100%",height:"20vh",shape:"rect",colorEnd:"#1A1C1F",colorStart:"#1D2023"})}),Object(g.jsx)("div",{className:"mt-6",children:Object(g.jsx)(G.a,{width:"100%",height:"15vh",shape:"rect",colorEnd:"#1A1C1F",colorStart:"#1D2023"})})]})},qn={approved:{title:"Suspend Account",icon:Object(g.jsx)(Re.c,{className:"mr-2",size:22}),action:"suspend"},pending:{title:"Activate Account",icon:Object(g.jsx)(pt.a,{className:"mr-2",size:22}),action:"activate"},suspended:{title:"Reactivate Account",icon:Object(g.jsx)(Sa.d,{className:"mr-2",size:22}),action:"reactivate"}},Bn=function(e){var t=e.goToPrevPage,a=e.name,n=e.status,r=e.accountAction,c=e.createdDate,s=e.loadingState;return Object(g.jsxs)("div",{className:"flex items-center justify-between",children:[Object(g.jsxs)("div",{className:"flex items-center",children:[Object(g.jsx)("button",{onClick:t,className:"bg-transparent border-0 outline-none focus:outline-none",children:Object(g.jsx)(R.c,{color:"#f00",size:28})}),Object(g.jsxs)("div",{className:"ml-14",children:[Object(g.jsx)("h3",{className:"text-white text-2xl font-semibold",children:a}),Object(g.jsxs)("p",{className:"text-white font-normal text-sm",children:["Date created: ",c]})]}),Object(g.jsx)("div",{className:S()("flex","items-center","justify-center","ml-10","py-1","px-4","rounded-md",{"bg-active-gradient":"approved"===n},{"bg-closed-gradient":"suspended"===n},{"bg-paused-gradient":"pending"===n}),children:Object(g.jsx)("p",{className:"text-white font-medium text-lg",children:Ba()(n)})})]}),Object(g.jsx)(Qe,{title:qn[n].title,icon:qn[n].icon,onBtnClick:function(){return r(qn[n].action)},isLoading:s})]})},Rn={suspend:"suspended",activate:"approved",reactivate:"approved"},Ln=function(){var e,t,a,r,c,s,o,l,d,u,j,m=Object(i.g)(),h=Object(i.i)().driverId,f=Object(n.useState)(!1),x=Object(D.a)(f,2),O=x[0],v=x[1],y=Object(n.useState)(!1),w=Object(D.a)(y,2),N=w[0],C=w[1],S=Object(n.useState)(!1),k=Object(D.a)(S,2),I=k[0],A=k[1],z=Object(n.useState)({open:!1,action:null}),T=Object(D.a)(z,2),_=T[0],E=T[1],P=Object(n.useState)(!1),M=Object(D.a)(P,2),F=M[0],q=M[1],B=Object(n.useContext)(mn),R=B.state,L=R.payoutRequests,U=R.fetchingPayouts,V=B.fetchPayoutRequests,W=Object(n.useContext)(Se),G=W.state,Q=G.fetchingSingleDriver,K=G.driver,H=G.updatingDriverStatus,J=G.updateStatusError,Y=W.fetchDriverById,X=W.updateDriverStatus,Z=W.clearError,$=Object(n.useContext)(Dn),ee=$.state,te=ee.fetchingLifetimeEarning,ae=ee.fetchingDayEarning,ne=ee.lifetimeEarning,re=ee.dayEarning,ce=$.getDriverLifetimeEarning,se=$.getDriverDayEarning,ie=Object(n.useMemo)((function(){return te||ae||Q||U}),[te,ae,Q,U]);console.log(K,ne,re,L),Object(n.useEffect)((function(){Object(b.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([se(h),ce(h),Y(h),V({driver:h})]);case 2:case"end":return e.stop()}}),e)})))()}),[]),ft(J,Z);var oe=function(){return Me.a.success("Driver is ".concat(Rn[_.action]," successfully!")),Y(h)},le=function(){var e=Object(b.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("suspending..."),e.next=3,X(h,Rn[_.action],oe);case 3:E({open:!1,action:null});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(b.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("activating..."),e.next=3,X(h,Rn[_.action],oe);case 3:E({open:!1,action:null});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(b.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("reactivating..."),e.next=3,X(h,Rn[_.action],oe);case 3:E({open:!1,action:null});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe={suspend:{confirmText:"Are you sure you want to suspend this account?",action:le},activate:{confirmText:"Are you sure you want to activate this account?",action:de},reactivate:{confirmText:"Are you sure you want to reactivate this account?",action:ue}},be={firstName:null===K||void 0===K||null===(e=K.name)||void 0===e?void 0:e.split(" ")[0],lastName:null===K||void 0===K||null===(t=K.name)||void 0===t?void 0:t.split(" ")[1],emailAddress:null===K||void 0===K?void 0:K.email,phoneNumber:null!==K&&void 0!==K&&K.phoneNumber?"0".concat(K.phoneNumber):"",favouriteMeal:null===K||void 0===K||null===(a=K.extraInfo)||void 0===a?void 0:a.favouriteMeal,hobby:null===K||void 0===K||null===(r=K.extraInfo)||void 0===r?void 0:r.favouriteHobby,askMeAbout:null===K||void 0===K||null===(c=K.extraInfo)||void 0===c?void 0:c.askMeAbout,vacationSpot:null===K||void 0===K?void 0:K.extraInfo.vacationSpot},je=Object(n.useMemo)((function(){return null!==K&&void 0!==K&&K.createdAt?Object(Ke.default)(new Date(K.createdAt),"dd/MM/yyyy"):"12/12/2021"}),[K]);return K&&Object(g.jsxs)(Dt,{customHeader:Object(g.jsx)(Bn,{goToPrevPage:function(){return m.push("/drivers")},name:K.name,status:K.status,accountAction:function(e){E({open:!0,action:e})},createdDate:je,loadingState:H}),children:[ie?Object(g.jsx)(Fn,{}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"w-full mt-20 rounded-lg bg-247-campaign-preview",children:[Object(g.jsxs)("div",{className:"w-full bg-247-campaign-preview-title flex items-center justify-between px-12 py-4 rounded-t-lg",children:[Object(g.jsx)("h4",{className:"text-white text-xl font-medium",children:"Personal Info"}),Object(g.jsx)("button",{onClick:function(){return A(!0)},className:"text-247-campaign-preview-title bg-white px-5 py-2 rounded-md font-medium",children:"Edit Info"})]}),Object(g.jsxs)("div",{className:"flex py-5 px-6",children:[Object(g.jsx)("img",{src:K.profilePhoto,alt:"profile",className:"h-full drop-shadow-sm w-full object-cover rounded-md",style:{maxWidth:"300px",maxHeight:"300px"}}),Object(g.jsx)("div",{className:"border-l border-white ml-14"}),Object(g.jsxs)("div",{className:"w-full flex justify-around pt-2",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)(Tn,{label:"First name",value:K.name.split(" ")[0]}),Object(g.jsx)(Tn,{label:"Phone Number",value:"0".concat(K.phoneNumber)}),Object(g.jsx)(Tn,{label:"Hobby",value:K.extraInfo.favouriteHobby}),Object(g.jsx)(Tn,{label:"Date Created",value:je,last:!0})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)(Tn,{label:"Last name",value:K.name.split(" ")[1]}),Object(g.jsx)(Tn,{label:"City",value:K.city}),Object(g.jsx)(Tn,{label:"Ask me about",value:K.extraInfo.askMeAbout}),Object(g.jsx)(Tn,{label:"ID Type",value:"Drivers License",last:!0})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)(Tn,{label:"Email Address",value:K.email}),Object(g.jsx)(Tn,{label:"Favourite Meal",value:K.extraInfo.favouriteMeal}),Object(g.jsx)(Tn,{label:"Vacation Spot",value:K.extraInfo.vacationSpot}),Object(g.jsx)(Tn,{label:"ID Upload",value:"mydl.png"})]})]})]})]}),Object(g.jsxs)("div",{className:"w-full mt-14 mb-24 rounded-lg bg-247-campaign-preview",children:[Object(g.jsxs)("div",{className:"w-full bg-247-campaign-preview-title flex items-center justify-between px-12 py-4 rounded-t-lg",children:[Object(g.jsx)("h4",{className:"text-white text-xl font-medium",children:"Earnings"}),Object(g.jsx)("button",{onClick:function(){return C(!0)},className:"text-247-campaign-preview-title bg-white px-5 py-2 rounded-md font-medium",children:"Payout History"})]}),Object(g.jsxs)("div",{className:"grid grid-cols-3 gap-6 pt-16 pb-5 px-6",children:[Object(g.jsx)(la,{bgColor:"bg-blue-gradient",infoTitle:"Today's Earning",infoValue:Ut(Qt(re),!0,!0)}),Object(g.jsx)(la,{bgColor:"bg-green-gradient",infoTitle:"Total Earning",infoValue:Ut(Qt(ne),!0,!0)}),Object(g.jsx)(la,{bgColor:"bg-yellow-gradient",infoTitle:"Pending Payout",infoValue:Ut(Qt(null===K||void 0===K||null===(s=K.driverStat)||void 0===s?void 0:s.pendingPayout),!0,!0),btnText:"Settle",btnAction:function(){return v(!0)}})]})]})]}),Object(g.jsx)(_n,{open:_.open,setOpen:E,text:null===(o=pe[null===_||void 0===_?void 0:_.action])||void 0===o?void 0:o.confirmText,icon:Object(g.jsx)(vn.a,{size:28,color:"#fff"}),handleConfirmation:null===(l=pe[null===_||void 0===_?void 0:_.action])||void 0===l?void 0:l.action}),Object(g.jsx)(_n,{open:F,setOpen:q,text:"Continue payout for ".concat(null===K||void 0===K?void 0:K.name),handleConfirmation:function(){console.log("paying driver..."),q(!1)},icon:Object(g.jsx)(yn.a,{size:32,color:"#fff"})}),Object(g.jsx)(En,{isOpen:I,setIsOpen:A,isEdit:!0,editData:be,submitAction:function(e){console.log(e,"Editing driver info...")}}),Object(g.jsx)(Pn,{isOpen:N,setIsOpen:C,payouts:L}),Object(g.jsx)(Mn,{isOpen:O,setIsOpen:v,driverDeets:{bankName:null===K||void 0===K||null===(d=K.bankInformation)||void 0===d||null===(u=d.bank)||void 0===u?void 0:u.name,accountNumber:null===K||void 0===K?void 0:K.bankInformation.accountNumber,accountName:null===K||void 0===K?void 0:K.bankInformation.accountName,pendingPayout:null===K||void 0===K||null===(j=K.driverStat)||void 0===j?void 0:j.pendingPayout},handlePayout:function(e){console.log(e,"confirming payout"),v(!1),q(!0)}})]})},Un=function(){return Object(g.jsx)("div",{children:Object(g.jsx)(G.a,{width:"100%",height:"140px",shape:"rect",colorEnd:"#1A1C1F",colorStart:"#1D2023"})})},Vn=["","Campaign Name","Status","Advertiser","Impressions","Duration","Ad Spend"],Wn={status:"all",type:"all",startDate:W()().subtract(12,"M"),endDate:W()()},Gn=function(){var e=Object(n.useState)(1),t=Object(D.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(5),s=Object(D.a)(c,2),o=s[0],l=s[1],d=Object(n.useState)([]),u=Object(D.a)(d,2),m=u[0],h=u[1],f=Object(i.g)(),x=$t("status",Wn.status),O=Object(D.a)(x,2),v=O[0],y=O[1],w=$t("type",Wn.type),C=Object(D.a)(w,2),I=C[0],A=C[1],z=ta("startDate",Wn.startDate),T=Object(D.a)(z,2),_=T[0],E=T[1],P=ta("endDate",Wn.endDate),M=Object(D.a)(P,2),F=M[0],q=M[1],B=Object(n.useMemo)((function(){return{status:v,type:I,startDate:Object(Ke.default)(_.toDate(),"yyyy/MM/dd"),endDate:Object(Ke.default)(F.toDate(),"yyyy/MM/dd")}}),[v,I,_,F]),R=Object(n.useMemo)((function(){return{limit:o,skip:(a-1)*o}}),[o,a]),L=Object(n.useContext)(Te),U=L.state,V=U.fetchingRevenue,W=U.totalRevenue,G=L.fetchRevenue,Q=Object(n.useContext)(ue),K=Q.fetchCampaigns,H=Q.fetchTotalCampaignSize,J=Q.fetchActiveCampaigns,Y=Q.state,X=Y.loading,Z=Y.campaigns,$=Y.campaignSize,ee=Y.retrieveErrorMsg,te=Y.fetchingTotalSize,ae=Y.campaignTotalSize,ne=Y.activeCampaignsSize,re=Y.fetchingActiveCampaigns,ce=Object(n.useMemo)((function(){return te||re||V}),[re,te,V]);Object(n.useEffect)((function(){Object(b.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([J(),H(),G()]);case 2:case"end":return e.stop()}}),e)})))()}),[]);var se=function(){var e=Object(b.a)(Object(p.a)().mark((function e(){var t;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Fa()(B,(function(e){return e&&"all"===e})),K(Object(j.a)(Object(j.a)({},t),R));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){se()}),[B,R]);var ie=Na(a,o,Z,$),oe=ie.indexOfFirstItem,le=ie.indexOfLastItem,de=ie.pages;return Object(g.jsxs)(Dt,{fetchCampaignsFn:se,children:[ce?Object(g.jsx)("div",{className:"grid grid-cols-3 gap-6 mt-16",children:Array.from({length:3},(function(e,t){return t+1})).map((function(e){return Object(g.jsx)(Un,{},e)}))}):Object(g.jsxs)("div",{className:"grid grid-cols-3 gap-6 mt-16",children:[Object(g.jsx)(la,{bgColor:"bg-blue-gradient",infoTitle:"Total Revenue",infoValue:Ut(Qt(W),!0),statChange:2.4}),Object(g.jsx)(la,{infoTitle:"Active Campaigns",infoValue:Ut(ne),bgColor:"bg-green-gradient",statChange:-2.5}),Object(g.jsx)(la,{infoTitle:"Total Campaigns",infoValue:Ut(ae),bgColor:"bg-yellow-gradient",statChange:2.4})]}),Object(g.jsxs)("div",{className:"mt-16 bg-black rounded-md border-2 border-247-dark-text mb-10",children:[Object(g.jsx)(Va,{defaultFilters:Wn,setSelectedStatusFilter:y,setSelectedTypeFilter:A,selectedStatusFilter:v,selectedTypeFilter:I,statusFilters:yt,typeFilters:wt,startDate:_,endDate:F,setStartDate:E,setEndDate:q}),Object(g.jsxs)(Ca,{headers:Vn,loadingData:X,children:[X&&Object(g.jsx)("div",{className:"flex items-center justify-center w-full absolute py-14",children:Object(g.jsx)(k,{size:"large"})}),!X&&Z.length>0&&Z.map((function(e,t){var a,n,r=Qa(e.duration[1],e.duration[0]);return Object(g.jsxs)("tr",{className:m.includes(t)?"text-lg bg-gray-700 border border-247-dark-text cursor-pointer hover:bg-gray-700":"text-lg border border-247-dark-text odd:bg-247-dark-accent3 cursor-pointer hover:bg-gray-700",onClick:function(t){t.target.closest(".toggle-check")||f.push({pathname:"/campaign/".concat(e.campaignID)})},children:[Object(g.jsx)("td",{className:"px-3 py-5 toggle-check",children:Object(g.jsx)(Bt,{checked:!!m.includes(t),iconColor:"#CACACA",name:e.id.toLowerCase(),handleChange:function(e){!function(e){if(m.includes(e)){var t=m.indexOf(e),a=Object(N.a)(m);a.splice(t,1),h(a)}else h([].concat(Object(N.a)(m),[e]))}(t)}})}),Object(g.jsx)("td",{className:"px-6 py-5",children:Object(g.jsx)("div",{className:"flex items-center ",children:e.campaignName})}),Object(g.jsx)("td",{className:"px-6 py-5",children:Object(g.jsxs)("div",{className:"flex items-center gap-3",children:[Object(g.jsx)("div",{className:S()("rounded-full","w-4","h-4",{"bg-active-gradient":"active"===e.status},{"bg-closed-gradient":"closed"===e.status},{"bg-paused-gradient":"paused"===e.status})}),Ba()(e.status)]})}),Object(g.jsx)("td",{className:"px-6 py-5",children:e.advertiser.companyName}),Object(g.jsx)("td",{className:"px-6 py-5",children:Number(e.campaignStat.impressions).toLocaleString("en-NG")}),Object(g.jsx)("td",{className:"px-6 py-5",children:"".concat(r," ").concat(r>1?"days":"day")}),Object(g.jsx)("td",{className:"px-6 py-5",children:Number(Qt((null===(a=e.campaignStat)||void 0===a||null===(n=a.adSpend)||void 0===n?void 0:n.amountInKobo)||0)).toLocaleString("en-NG",{style:"currency",currency:"NGN"})})]},"campaign".concat(e.campaignID))}))]}),!X&&!ee&&0===Z.length&&Object(g.jsx)("div",{className:"w-full py-9",children:Object(g.jsx)(Aa,{title:"No Campaign Found",subtitle:"We cannot find any campaign that fits your criteria."})}),!X&&ee&&Object(g.jsx)("div",{className:"w-full py-9",children:Object(g.jsx)(Da,{title:"Error Retrieving Campaigns",subtitle:ee})})]}),Object(g.jsx)("div",{className:"flex items-center justify-end mb-20",children:Z&&Z.length>0&&Object(g.jsx)(ka,{activePage:a,dataLength:$,firstItem:oe+1,lastItem:le,pages:de,setActivePage:r,setVisibleRows:l,visibleRows:o})})]})},Qn=function(e){var t=e.data,a=e.impressionDataKey,n=e.interactionsDataKey,r=e.xDataKey;return Object(g.jsx)(zt.a,{width:"100%",height:360,children:Object(g.jsxs)(Tt.a,{data:t,margin:{top:5,right:20,bottom:5,left:0},children:[Object(g.jsx)(Et.a,{stroke:"#4d4d4d",strokeDasharray:"5 5"}),Object(g.jsx)(_t.a,{type:"monotone",dataKey:a,stroke:"#FF0000"}),Object(g.jsx)(_t.a,{type:"monotone",dataKey:n,stroke:"#4FB81D"}),Object(g.jsx)(Mt.a,{axisLine:!1}),Object(g.jsx)(Pt.a,{dataKey:r}),Object(g.jsx)(Ft.a,{})]})})},Kn=function(e){Object.assign({},e);return Object(g.jsxs)("div",{className:"py-10 h-full",children:[Object(g.jsx)("div",{children:Object(g.jsx)(G.a,{width:"100%",height:"30vh",shape:"rect",colorEnd:"#1A1C1F",colorStart:"#1D2023"})}),Object(g.jsxs)("div",{className:"grid grid-cols-3 space-x-4 mt-6",children:[Object(g.jsx)("div",{children:Object(g.jsx)(G.a,{width:"100%",height:"20vh",shape:"rect",colorEnd:"#1A1C1F",colorStart:"#1D2023"})}),Object(g.jsx)("div",{children:Object(g.jsx)(G.a,{width:"100%",height:"20vh",shape:"rect",colorEnd:"#1A1C1F",colorStart:"#1D2023"})}),Object(g.jsx)("div",{children:Object(g.jsx)(G.a,{width:"100%",height:"20vh",shape:"rect",colorEnd:"#1A1C1F",colorStart:"#1D2023"})})]}),Object(g.jsx)("div",{className:"mt-6",children:Object(g.jsx)(G.a,{width:"100%",height:"10vh",shape:"rect",colorEnd:"#1A1C1F",colorStart:"#1D2023"})}),Object(g.jsx)("div",{className:"mt-6",children:Object(g.jsx)(G.a,{width:"100%",height:"15vh",shape:"rect",colorEnd:"#1A1C1F",colorStart:"#1D2023"})})]})},Hn={active:[{text:"Pause",action:"pause",icon:Object(g.jsx)(R.k,{className:"mr-2",size:22})},{text:"Terminate",action:"terminate",icon:Object(g.jsx)(Re.c,{className:"mr-2",size:22})}],paused:[{text:"Resume",action:"resume",icon:Object(g.jsx)(R.l,{className:"mr-2",size:22})},{text:"Terminate",action:"terminate",icon:Object(g.jsx)(Re.c,{className:"mr-2",size:22})}],closed:[]},Jn=function(e){var t=e.loadingState,a=e.handleCampaignAction,n=e.campaignName,r=e.campaignId,c=e.status,s=e.goToPrevPage;return Object(g.jsxs)("div",{className:"flex items-center justify-between",children:[Object(g.jsxs)("div",{className:"flex items-center",children:[Object(g.jsx)("button",{onClick:s,className:"bg-transparent border-0 outline-none focus:outline-none",children:Object(g.jsx)(R.c,{color:"#f00",size:28})}),Object(g.jsxs)("div",{className:"ml-14 flex items-center",children:[Object(g.jsx)("h3",{className:"text-2xl text-247-gray font-semibold",children:n}),Object(g.jsx)("span",{className:"bg-247-dark-text text-247-gray-accent2 px-3 py-1 text-xl rounded-md ml-8",children:r})]})]}),Object(g.jsx)("div",{className:"flex items-center justify-center",children:Hn[c].map((function(e){return Object(g.jsx)("div",{className:"mx-3",children:Object(g.jsx)(Qe,{title:e.text,icon:e.icon,onBtnClick:function(){return a(e.action)},isLoading:t})})}))})]})},Yn={active:"#028307",paused:"#EC5500",closed:"#E20000"},Xn=function(){var e,t,a,r,c,s,o=Object(n.useState)({open:!1,action:null}),l=Object(D.a)(o,2),d=l[0],u=l[1],j=Object(n.useState)(!1),m=Object(D.a)(j,2),h=m[0],f=m[1],x=Object(i.i)().campaignId,O=Object(n.useContext)(ue),v=O.state,y=v.loading,w=v.campaign,N=v.updatingStatus,C=v.updateStatusError,S=v.updatingAttributes,k=v.updateAttributesError,I=O.fetchCampaignById,A=O.updateCampaignStatus,z=O.updateCampaignAttributes,T=O.clearError,_=Object(n.useContext)(ya),E=_.state,P=E.loading,M=E.advertisers,F=_.fetchAdvertisers;ft(C,(function(){T("updateStatus")})),ft(k,(function(){T("updateAttributes")})),Object(n.useEffect)((function(){F({})}),[]),console.log(M),Object(n.useEffect)((function(){I(x)}),[]),console.log(w);var q=function(){var e=Object(b.a)(Object(p.a)().mark((function e(t){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t,x,(function(){return Me.a.success("Campaign has been updated successfully!"),I(x)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=Object(i.g)(),R=function(){var e=Object(b.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(w.campaignID,{action:"terminate"},(function(){return Me.a.success("Campaign has been terminated successfully!"),I(x)}));case 2:u(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(b.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(w.campaignID,{action:"pause"},(function(){return Me.a.success("Campaign has been paused successfully!"),I(x)}));case 2:u(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(b.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(w.campaignID,{action:"resume"},(function(){return Me.a.success("Campaign has resumed successfully!"),I(x)}));case 2:u(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V={pause:{confirmText:"Are you sure you want to pause this campaign?",handleFn:L},terminate:{confirmText:"Are you sure you want to terminate this campaign?",handleFn:R},resume:{confirmText:"Are you sure you want to resume this campaign?",handleFn:U}},W={campaignName:null===w||void 0===w?void 0:w.campaignName,advertiser:Ua()(M,{companyName:null===w||void 0===w?void 0:w.advertiser.companyName}),duration:null===w||void 0===w?void 0:w.duration.map((function(e){return new Date(e)})),adBudget:Qt(null===w||void 0===w?void 0:w.adBudgetInKobo).toLocaleString(),adType:Ua()(Ct,{value:null===w||void 0===w?void 0:w.adType}),preview:"image"===(null===w||void 0===w?void 0:w.adType)?null===w||void 0===w?void 0:w.campaignMedia:null===w||void 0===w?void 0:w.videoThumbnail},G=Object(n.useMemo)((function(){return w&&(e=w.duration[1],t=w.duration[0],Object(Wa.a)(new Date(e),new Date(t)));var e,t}),[w]);return w&&Object(g.jsx)(Dt,{customHeader:Object(g.jsx)(Jn,{campaignId:null===w||void 0===w?void 0:w.campaignID,campaignName:null===w||void 0===w?void 0:w.campaignName,handleCampaignAction:function(e){u({open:!0,action:e})},goToPrevPage:function(){return B.push("/campaigns")},status:null===w||void 0===w?void 0:w.status,loadingState:N}),children:y||P?Object(g.jsx)(Kn,{}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"w-full mt-20 rounded-lg bg-247-campaign-preview",children:[Object(g.jsxs)("div",{className:"w-full bg-247-campaign-preview-title flex items-center justify-between px-12 py-4 rounded-t-lg",children:[Object(g.jsx)("h4",{className:"text-white text-xl font-medium",children:"Campaign Information"}),Object(g.jsx)("button",{onClick:function(){return f(!0)},className:"text-247-campaign-preview-title bg-white px-5 py-2 rounded-md font-medium",children:"Edit Campaign"})]}),Object(g.jsxs)("div",{className:"flex py-5 px-6",children:[Object(g.jsx)("img",{src:"image"===w.adType?w.campaignMedia:w.videoThumbnail,alt:"ad preview",className:"h-64 drop-shadow-sm w-full object-cover rounded-md",style:{maxWidth:"450px"}}),Object(g.jsx)("div",{className:"border-l border-white ml-14"}),Object(g.jsxs)("div",{className:"w-full flex justify-around pt-2",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)(Tn,{label:"Campaign name",value:null===w||void 0===w?void 0:w.campaignName}),Object(g.jsx)(Tn,{label:"Advertiser",value:null===w||void 0===w||null===(e=w.advertiser)||void 0===e?void 0:e.companyName}),Object(g.jsx)(Tn,{label:"Ad Type",value:Ba()(null===w||void 0===w?void 0:w.adType),last:!0})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)(Tn,{label:"Ad Budget",value:Number(Qt(null===w||void 0===w?void 0:w.adBudgetInKobo)).toLocaleString("en-NG",{currency:"NGN",style:"currency"})}),Object(g.jsx)(Tn,{label:"Duration",value:G}),Object(g.jsx)(Tn,{label:"Status",value:Ba()(null===w||void 0===w?void 0:w.status),valueColor:Yn[null===w||void 0===w?void 0:w.status],last:!0})]})]})]})]}),Object(g.jsxs)("div",{className:"grid grid-cols-3 gap-6 mt-14",children:[Object(g.jsx)(la,{bgColor:"bg-blue-gradient",infoTitle:"Campaign Playtime",infoValue:Vt(null===w||void 0===w||null===(t=w.campaignStat)||void 0===t?void 0:t.playTimeInSeconds)}),Object(g.jsx)(la,{infoTitle:"Total Impressions",infoValue:Ut(w.campaignStat.impressions,!1,!0),bgColor:"bg-green-gradient"}),Object(g.jsx)(la,{infoTitle:"Amount Spent",infoValue:Ut(Qt((null===w||void 0===w||null===(a=w.campaignStat)||void 0===a||null===(r=a.adSpend)||void 0===r?void 0:r.amountInKobo)||0),!0,!0),bgColor:"bg-yellow-gradient"})]}),Object(g.jsxs)("div",{className:"w-full mb-32 bg-247-campaign-preview rounded-xl mt-14 px-9 py-8",children:[Object(g.jsxs)("div",{className:"flex items-center justify-between mb-14",children:[Object(g.jsx)("h3",{className:"text-3xl text-247-gray-accent2 font-medium",children:"Campaign Analytics"}),Object(g.jsxs)("div",{className:"flex gap-10",children:[Object(g.jsxs)("div",{className:"flex items-center",children:[Object(g.jsx)("div",{className:"w-5 h-5 rounded-full border-4 border-247-red-straight"}),Object(g.jsx)("label",{className:"text-247-gray-accent2 text-2xl ml-4",children:"Impressions"})]}),Object(g.jsxs)("div",{className:"flex items-center",children:[Object(g.jsx)("div",{className:"w-5 h-5 rounded-full border-4 border-247-green"}),Object(g.jsx)("label",{className:"text-247-gray-accent2 text-2xl ml-4",children:"Interactions"})]})]})]}),Object(g.jsx)(Qn,{data:Rt,interactionsDataKey:"interactions",impressionDataKey:"impressions",xDataKey:"date"})]}),Object(g.jsx)(_n,{open:d.open,setOpen:u,text:null===(c=V[null===d||void 0===d?void 0:d.action])||void 0===c?void 0:c.confirmText,icon:Object(g.jsx)(qe.b,{size:28,color:"#fff"}),handleConfirmation:null===(s=V[null===d||void 0===d?void 0:d.action])||void 0===s?void 0:s.handleFn}),Object(g.jsx)(It,{modalIsOpen:h,setIsOpen:f,modalWidth:704,editData:W,editFn:q,editing:S,isEdit:!0})]})})},Zn=function(e){var t=e.name;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("textarea",{className:"bg-transparent border-2 border-247-dark-text w-2/3 rounded-md px-6 py-4 text-white text-lg focus:outline-none focus:ring-1",placeholder:"Write a message...",name:t,id:t,cols:"30",rows:"10"})})},$n=function(e){var t=e.btnValue,a=e.clickFn,n=e.active;return Object(g.jsx)("div",{className:"w-36 cursor-pointer text-xl flex justify-center items-center rounded-md border border-247-dark-text text-247-gray-accent2 py-2 ".concat(n?"bg-247-gray-accent3":"bg-transparent"),onClick:a,children:t})},er=function(){var e=Object(n.useState)("all"),t=Object(D.a)(e,2),a=t[0],r=t[1],c=function(e){r(e)};return Object(g.jsxs)(Dt,{pageTitle:"Send Notifs",children:[Object(g.jsxs)("div",{className:"mt-16 flex items-center gap-5",children:[Object(g.jsx)($n,{btnValue:"All",active:"all"===a,clickFn:function(){return c("all")}}),Object(g.jsx)($n,{btnValue:"Advertisers",active:"advertisers"===a,clickFn:function(){return c("advertisers")}}),Object(g.jsx)($n,{btnValue:"Drivers",active:"drivers"===a,clickFn:function(){return c("drivers")}})]}),Object(g.jsxs)("div",{className:"mt-14",children:[Object(g.jsx)(Zn,{name:"notif-text"}),Object(g.jsx)(I,{type:"submit",className:["bg-247-red","block","mt-12","px-10"],children:"Send Notification"})]})]})},tr=function(e){var t,a,n=e.isOpen,r=e.setIsOpen,c=e.handleUpload,s=e.setMediaItem,i=e.setMediaDuration,o=e.creatingContent,l=q.b({title:q.c().required("Title is required"),category:q.c().required("Category is required")}),d=Object(w.e)({resolver:Object(F.a)(l)}),u=d.handleSubmit,p=d.formState.errors,b=d.register;return Object(g.jsxs)(at,{modalOpen:n,setModalOpen:r,width:704,children:[Object(g.jsx)("h2",{className:"text-white text-2xl font-semibold text-center",children:"Upload Content"}),Object(g.jsxs)("form",{className:"mt-10",onSubmit:u(c),children:[Object(g.jsx)(O,{label:"Title",darkMode:!0,placeholder:"enter title",type:"string",registerFn:b,name:"title",errorText:null===(t=p.title)||void 0===t?void 0:t.message}),Object(g.jsx)(O,{label:"Category",darkMode:!0,placeholder:"enter category",type:"string",registerFn:b,name:"category",errorText:null===(a=p.category)||void 0===a?void 0:a.message}),Object(g.jsx)(ht,{label:"Upload Content",multiple:!1,callUpdateFilesCb:function(e){var t=Object.values(e);s(t)},accepts:".mp4",setDuration:i}),Object(g.jsx)(I,{type:"submit",className:["bg-247-red","block","mt-12","px-12","font-normal"],fullWidth:!0,isLoading:o,children:"Upload"})]})]})},ar=a(185),nr=a.n(ar),rr=a(324),cr=a.n(rr),sr=Ge(Object(n.forwardRef)((function(e,t){var a=e.setConfirmItemDelete,n=e.setCurrentItem,r=e.removeItemFromPlaylist,c=e.addItemToPlaylist,s=e.contentItem,i=e.index,o=e.checkedItems,l=e.toggleItemCheck,d=e.hideAction,u=e.smallText,p=e.open,b=e.setOpen,j=[{name:"Delete content",action:function(e){b(!1),n(e),a(!0)}},"not-live"===s.status&&{name:"Add to live playlist",action:function(e){b(!1),c(e)}},"live"===s.status&&{name:"Remove from live playlist",action:function(e){b(!1),r(e)}}];return Object(g.jsxs)("tr",{className:S()("border","border-247-dark-text","hover:bg-gray-700",{"bg-gray-700":o.includes(i)},{"odd:bg-247-dark-accent3":!o.includes(i)},{"text-lg":!u},{"text-sm":u}),children:[Object(g.jsx)("td",{className:"px-3 py-5",children:Object(g.jsx)(Bt,{checked:!!o.includes(i),iconColor:"#CACACA",name:s.title.toLowerCase(),handleChange:function(){return l(i)}})}),Object(g.jsx)("td",{className:"px-6 py-5",children:Object(g.jsxs)("div",{className:"flex items-center",children:[Object(g.jsx)("img",{src:s.previewUri,className:"h-14 w-24 object-cover rounded",alt:"content thumbnail"}),Object(g.jsxs)("div",{className:"ml-4",children:[Object(g.jsx)("p",{children:s.title}),Object(g.jsx)("p",{className:"text-sm text-247-timestamp-color font-semibold",children:s.type})]})]})}),Object(g.jsx)("td",{className:"px-6 py-5",children:s.duration}),Object(g.jsx)("td",{className:"px-6 py-5",children:s.category}),Object(g.jsx)("td",{className:"px-6 py-5",children:Ka(s.createdAt)}),Object(g.jsx)("td",{className:"px-6 py-5",children:Ut(s.plays,!1,!0)}),Object(g.jsx)("td",{className:S()("px-6","py-5",{"text-247-red-straight":"live"===s.status,"text-247-not-live":"not-live"===s.status}),children:Ba()(s.status.split("-").join(" "))}),!d&&Object(g.jsx)("td",{children:Object(g.jsxs)("div",{className:"relative",ref:t,children:[Object(g.jsx)("button",{onClick:function(){return b(!p)},className:"flex items-center justify-center",children:Object(g.jsx)(pt.c,{color:"#fff",size:24})}),Object(g.jsx)("ul",{style:{transform:"translateX(-90%)"},className:S()("absolute","top-7","bg-247-dark-accent3","p-0","left-1/2","transition-all","translate-y-3","origin-top-right","w-52","z-50","shadow-xl","rounded-lg",{"opacity-0":!p},{"opacity-100":p},{visible:p},{hidden:!p}),children:cr()(j).map((function(e){return Object(g.jsx)("li",{className:"w-full py-4 px-5 text-white text-sm font-semibold hover:bg-black hover:text-247-red-straight first:rounded-t-lg last:rounded-b-lg cursor-pointer",onClick:function(t){return e.action(s)},children:e.name},nr()(e.name))}))})]})})]})}))),ir="creating_content",or="fetching_media_items",lr="deleting_item",dr="fetch_media_items_error",ur="create_error",pr="delete_error",br="set_media_items",jr="set_media_items_size",mr={create:ur,fetchItems:dr,deleteItem:pr},hr=z((function(e,t){switch(t.type){case ir:return Object(j.a)(Object(j.a)({},e),{},{creatingContent:t.payload});case ur:return Object(j.a)(Object(j.a)({},e),{},{createError:t.payload});case or:return Object(j.a)(Object(j.a)({},e),{},{fetchingMediaItems:t.payload});case dr:return Object(j.a)(Object(j.a)({},e),{},{fetchItemsError:t.payload});case lr:return Object(j.a)(Object(j.a)({},e),{},{deletingItem:t.payload});case pr:return Object(j.a)(Object(j.a)({},e),{},{deleteItemError:t.payload});case br:return Object(j.a)(Object(j.a)({},e),{},{mediaItems:t.payload});case jr:return Object(j.a)(Object(j.a)({},e),{},{mediaItemsSize:t.payload});default:return e}}),{creatingContent:!1,createError:null,deletingItem:!1,deleteItemError:null,fetchingMediaItems:!1,fetchItemsError:null,mediaItems:[],mediaItemsSize:0},{createContentItem:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a,n){return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:ir,payload:!0}),e({type:ur,payload:null}),t.prev=2,t.next=5,_.post("/mediaitems",a,{headers:{Authorization:"Bearer ".concat(Q())}});case 5:e({type:ir,payload:!1}),n&&n(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),t.t0.response?e({type:ur,payload:t.t0.response.data.message||"Unable to create content. Something went wrong"}):e({type:ur,payload:"Unable to create content. Something went wrong"}),e({type:ir,payload:!1});case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,a){return t.apply(this,arguments)}}()},fetchMediaItems:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:or,payload:!0}),e({type:dr,payload:null}),t.prev=2,t.next=5,_.get("/mediaitems",{headers:{Authorization:"Bearer ".concat(Q())},params:Object(j.a)(Object(j.a)({},a),{},{sortBy:"createdAt",orderBy:"desc"})});case 5:n=t.sent,e({type:br,payload:n.data.mediaItems}),e({type:jr,payload:n.data.size}),e({type:or,payload:!1}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),t.t0.response?e({type:dr,payload:t.t0.response.data.message||"Unable to fetch media items. Something went wrong"}):e({type:dr,payload:"Unable to fetch media items. Something went wrong"}),e({type:or,payload:!1});case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()},clearError:function(e){return function(t){e({type:mr[t],payload:null})}},deleteMediaItem:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a,n){return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:lr,payload:!0}),e({type:pr,payload:null}),t.prev=2,t.next=5,_.delete("/mediaitems/".concat(a),{headers:{Authorization:"Bearer ".concat(Q())}});case 5:e({type:lr,payload:!1}),n&&n(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),t.t0.response?e({type:pr,payload:t.t0.response.data.message||"Unable to delete media item. Something went wrong"}):e({type:pr,payload:"Unable to delete media item. Something went wrong"}),e({type:lr,payload:!1});case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,a){return t.apply(this,arguments)}}()}}),fr=hr.Context,gr=hr.Provider,xr="fetching_general_playlist",Or="set_general_playlist",vr="fetch_general_playlist_error",yr="adding_playlist_item",wr="playlist_add_success",Nr="playlist_add_error",Cr="deleting_playlist_item",Sr="playlist_delete_success",kr="playlist_delete_error",Ir="adding_multiple_item",Ar="add_multiple_success",Dr="add_multiple_error",zr="reordering_playlist",Tr="reorder_success",_r="reorder_fail",Er={fetchGeneral:vr,addToPlaylist:Nr,addMultiple:Dr,deleteItem:kr,reorder:_r},Pr=z((function(e,t){switch(t.type){case xr:return Object(j.a)(Object(j.a)({},e),{},{fetchingGeneralPlaylist:t.payload});case Or:return Object(j.a)(Object(j.a)({},e),{},{generalPlaylist:t.payload});case vr:return Object(j.a)(Object(j.a)({},e),{},{fetchGeneralPlaylistErr:t.payload});case yr:return Object(j.a)(Object(j.a)({},e),{},{addingItemToPlaylist:t.payload});case wr:return Object(j.a)(Object(j.a)({},e),{},{playlistAddedSuccess:t.payload});case Nr:return Object(j.a)(Object(j.a)({},e),{},{playlistAddedFail:t.payload});case Cr:return Object(j.a)(Object(j.a)({},e),{},{deletePlaylistItem:t.payload});case Sr:return Object(j.a)(Object(j.a)({},e),{},{playlistDeleteSuccess:t.payload});case kr:return Object(j.a)(Object(j.a)({},e),{},{playlistDeleteError:t.payload});case Ir:return Object(j.a)(Object(j.a)({},e),{},{addingMultipleItem:t.payload});case Ar:return Object(j.a)(Object(j.a)({},e),{},{addMultipleItemSuccess:t.payload});case Dr:return Object(j.a)(Object(j.a)({},e),{},{addMultipleItemError:t.payload});case zr:return Object(j.a)(Object(j.a)({},e),{},{reorderingPlaylist:t.payload});case Tr:return Object(j.a)(Object(j.a)({},e),{},{reorderSuccess:t.payload});case _r:return Object(j.a)(Object(j.a)({},e),{},{reorderError:t.payload});default:return e}}),{fetchingGeneralPlaylist:!1,generalPlaylist:[],fetchGeneralPlaylistErr:null,addingItemToPlaylist:!1,playlistAddedSuccess:null,playlistAddedFail:null,deletingPlaylistItem:!1,playlistDeleteSuccess:null,playlistDeleteError:null,addingMultipleItem:!1,addMultipleItemError:null,addMultipleItemSuccess:null,reorderingPlaylist:!1,reorderError:null,reorderSuccess:null},{fetchGeneralPlaylist:function(e){return Object(b.a)(Object(p.a)().mark((function t(){var a;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:xr,payload:!0}),e({type:vr,payload:null}),t.prev=2,t.next=5,_.get("/playlists",{headers:{Authorization:"Bearer ".concat(Q())},params:{name:"general"}});case 5:a=t.sent,console.log(a.data.playlist),e({type:xr,payload:!1}),e({type:Or,payload:a.data.playlist.queue}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),t.t0.response?e({type:vr,payload:t.t0.response.data.message||"Unable to fetch playlist. Something went wrong"}):e({type:vr,payload:"Unable to fetch playlist. Something went wrong"}),e({type:xr,payload:!1});case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))},addItemToPlaylist:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a,n){var r;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:yr,payload:!0}),e({type:Nr,payload:null}),t.prev=2,t.next=5,_.post("/playlists/item",a,{headers:{Authorization:"Bearer ".concat(Q())}});case 5:r=t.sent,console.log(r.data.message),e({type:yr,payload:!1}),e({type:wr,payload:r.data.message}),n&&n(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),t.t0.response?e({type:Nr,payload:t.t0.response.data.message||"Unable to add item to playlist. Something went wrong"}):e({type:Nr,payload:"Unable to add item to playlist. Something went wrong"}),e({type:yr,payload:!1});case 16:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e,a){return t.apply(this,arguments)}}()},clearError:function(e){return function(t){e({type:Er[t],payload:null})}},deletePlaylistItem:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a,n){var r;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:Cr,payload:!0}),e({type:kr,payload:null}),t.prev=2,t.next=5,_.delete("/playlists/item/".concat(a),{headers:{Authorization:"Bearer ".concat(Q())}});case 5:r=t.sent,console.log(r.data),e({type:Cr,payload:!1}),e({type:Sr,payload:r.data.message}),n&&n(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),t.t0.response?(console.log(t.t0.response),e({type:kr,payload:t.t0.response.data.message||"Unable to delete playlist item. Something went wrong"})):e({type:kr,payload:"Unable to delete playlist item. Something went wrong"}),e({type:Cr,payload:!1});case 16:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e,a){return t.apply(this,arguments)}}()},deletePlaylistItemForMedia:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a,n){var r;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:Cr,payload:!0}),e({type:kr,payload:null}),t.prev=2,t.next=5,_.delete("/playlists/media/".concat(a),{headers:{Authorization:"Bearer ".concat(Q())}});case 5:r=t.sent,e({type:Cr,payload:!1}),e({type:Sr,payload:r.data.message}),n&&n(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),t.t0.response?(console.log(t.t0.response),e({type:kr,payload:t.t0.response.data.message||"Unable to delete playlist item. Something went wrong"})):e({type:kr,payload:"Unable to delete playlist item. Something went wrong"}),e({type:Cr,payload:!1});case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e,a){return t.apply(this,arguments)}}()},addMultipleItemToPlaylist:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a,n){var r;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:Ir,payload:!0}),e({type:Dr,payload:null}),t.prev=2,t.next=5,_.post("/playlists/item/multiple",a,{headers:{Authorization:"Bearer ".concat(Q())}});case 5:r=t.sent,console.log(r.data),e({type:Ir,payload:!1}),e({type:Ar,payload:r.data.message}),n&&n(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),t.t0.response?e({type:Dr,payload:t.t0.response.data.message||"Unable to add items to playlist. Something went wrong"}):e({type:Dr,payload:"Unable to add items to playlist. Something went wrong"}),e({type:Ir,payload:!1});case 16:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e,a){return t.apply(this,arguments)}}()},reorderPlaylist:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a,n){var r;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:zr,payload:!0}),e({type:Tr,payload:null}),t.prev=2,t.next=5,_.post("/playlists/reorder",a,{headers:{Authorization:"Bearer ".concat(Q())}});case 5:r=t.sent,console.log(r.data),e({type:zr,payload:!1}),e({type:Tr,payload:r.data.message}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),t.t0.response?e({type:_r,payload:t.t0.response.data.message||"Unable to reorder playlist. Something went wrong"}):e({type:_r,payload:"Unable to reorder playlist. Something went wrong"}),e({type:zr,payload:!1});case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e,a){return t.apply(this,arguments)}}()}}),Mr=Pr.Context,Fr=Pr.Provider,qr=function(){return Object(g.jsx)("div",{className:"absolute top-0 left-0 right-0 min-h-screen z-50 bg-247-overlay-2 flex items-center justify-center",children:Object(g.jsx)(k,{size:"v-large"})})},Br=["","Title","Duration","Category","Date","Plays","Status",""],Rr=function(){var e=Object(n.useState)([]),t=Object(D.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(1),s=Object(D.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(5),d=Object(D.a)(l,2),u=d[0],m=d[1],h=Object(n.useState)(),f=Object(D.a)(h,2),x=f[0],O=f[1],v=Object(n.useState)([]),y=Object(D.a)(v,2),w=y[0],C=y[1],S=Object(n.useState)(0),I=Object(D.a)(S,2),A=I[0],z=I[1],T=Object(n.useState)(!1),_=Object(D.a)(T,2),E=_[0],P=_[1],M=Object(n.useState)(!1),F=Object(D.a)(M,2),q=F[0],B=F[1],R=Object(n.useContext)(fr),L=R.state,U=L.creatingContent,V=L.createError,W=L.fetchingMediaItems,G=L.deletingItem,Q=L.deleteItemError,K=L.mediaItems,H=L.mediaItemsSize,J=L.fetchItemsError,Y=R.createContentItem,X=R.fetchMediaItems,Z=R.deleteMediaItem,$=R.clearError,ee=Object(n.useContext)(Mr),te=ee.state,ae=te.addingItemToPlaylist,ne=te.playlistAddedFail,re=te.deletingPlaylistItem,ce=te.playlistDeleteError,se=ee.addItemToPlaylist,ie=ee.deletePlaylistItemForMedia,oe=ee.clearError;ft(V,(function(){$("create")})),ft(Q,(function(){$("deleteItem")})),ft(ne,(function(){oe("addToPlaylist")})),ft(ce,(function(){oe("deleteItem")}));var le=Object(n.useMemo)((function(){return{limit:u,skip:(i-1)*u}}),[u,i]);Object(n.useEffect)((function(){X(Object(j.a)({},le))}),[le]);var de=Na(i,u,K,H),ue=de.indexOfFirstItem,pe=de.indexOfLastItem,be=de.pages,je=function(e){if(a.includes(e)){var t=a.indexOf(e),n=Object(N.a)(a);n.splice(t,1),r(n)}else r([].concat(Object(N.a)(a),[e]))},me=function(){return Me.a.success("New content created!"),X(Object(j.a)({},le))},he=function(){return Me.a.success("Media item deleted successfully!"),X(Object(j.a)({},le))},fe=function(){var e=Object(b.a)(Object(p.a)().mark((function e(t){var a;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"uploading new content..."),console.log(w,Wt(A)),(a=new FormData).append("title",t.title),a.append("category",t.category),a.append("duration",Wt(A)),a.append("mediaItem",w[0]),e.next=9,Y(a,me);case 9:P(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=Object(b.a)(Object(p.a)().mark((function e(t){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(t.id,(function(){return Me.a.success("Item removed from playlist successfully!"),X(Object(j.a)({},le))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Object(b.a)(Object(p.a)().mark((function e(t){var a,n,r,c;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"adding item to playlist..."),a=t.id,n=t.duration,r=t.mediaUri,c=t.title,e.next=4,se({title:c,mediaUrl:r,durationInSeconds:Gt(n),resourceRef:a,modelType:"MediaItem",mediaType:"video",contentType:"non-campaign"},(function(){return Me.a.success("Item added to playlist successfully!"),X(Object(j.a)({},le))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(b.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(x.mediaId,he);case 2:B(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)(Dt,{children:[(ae||re)&&Object(g.jsx)(qr,{}),Object(g.jsxs)("div",{className:"mt-20 rounded-md bg-247-secondary border-2 border-247-dark-text mb-10",children:[Object(g.jsx)("div",{className:"flex py-4 px-8 justify-end",children:Object(g.jsx)(Qe,{title:"Upload Content",icon:Object(g.jsx)(pt.d,{className:"mr-3",size:22}),onBtnClick:function(){return P(!0)}})}),Object(g.jsxs)(Ca,{headers:Br,loadingData:W,children:[W&&Object(g.jsx)("div",{className:"flex items-center justify-center w-full absolute py-14",children:Object(g.jsx)(k,{size:"large"})}),!W&&K.length>0&&K.map((function(e,t){return Object(g.jsx)(sr,{checkedItems:a,contentItem:e,index:t,toggleItemCheck:je,setConfirmItemDelete:B,removeItemFromPlaylist:ge,addItemToPlaylist:xe,setCurrentItem:O},"contentItem_".concat(t))}))]}),!W&&!J&&0===K.length&&Object(g.jsx)("div",{className:"w-full py-9",children:Object(g.jsx)(Aa,{title:"No Campaign Found",subtitle:"We cannot find any campaign that fits your criteria."})}),!W&&J&&Object(g.jsx)("div",{className:"w-full py-9",children:Object(g.jsx)(Da,{title:"Error Retrieving Campaigns",subtitle:J})})]}),Object(g.jsx)("div",{className:"flex items-center justify-end mb-20",children:K&&K.length>0&&Object(g.jsx)(ka,{activePage:i,dataLength:H,firstItem:ue+1,lastItem:pe,pages:be,setActivePage:o,setVisibleRows:m,visibleRows:u})}),Object(g.jsx)(tr,{isOpen:E,setIsOpen:P,handleUpload:fe,setMediaItem:C,setMediaDuration:z,creatingContent:U}),Object(g.jsx)(_n,{open:q,setOpen:B,text:"Are you sure you want to delete this content?",icon:Object(g.jsx)(qe.b,{size:28,color:"#fff"}),handleConfirmation:Oe,processingConfirm:G})]})},Lr=a(143),Ur=a.n(Lr),Vr=a(150),Wr=Ge(Object(n.forwardRef)((function(e,t){var a=e.playlistItem,r=e.onDownwardMove,c=e.onUpwardMove,s=e.setConfirmRemoveItem,i=e.open,o=e.setOpen,l=e.draggableId,d=e.index,u=e.setCurrentItem,p=e.key,b=["campaign"!==a.contentType&&{name:"Remove content",action:function(e){u(e),o(!1),s(!0)}},{name:"Move up",action:function(e,t){o(!1),c(e,t)}},{name:"Move down",action:function(e,t){o(!1),r(e,t)}}].filter((function(e){return e})),m=Object(n.useMemo)((function(){var e,t,n;return"campaign"===a.contentType?"video"===a.mediaType?null===a||void 0===a||null===(e=a.resourceRef)||void 0===e?void 0:e.videoThumbnail:null===a||void 0===a||null===(t=a.resourceRef)||void 0===t?void 0:t.campaignMedia:null===a||void 0===a||null===(n=a.resourceRef)||void 0===n?void 0:n.previewUri}),[a.contentType]);return Object(g.jsx)(Vr.b,{draggableId:l,index:d,children:function(e){return Object(g.jsxs)("tr",Object(j.a)(Object(j.a)({ref:e.innerRef},e.draggableProps),{},{className:"text-lg border border-247-dark-text odd:bg-247-dark-accent3 hover:bg-gray-700",children:[Object(g.jsx)("td",Object(j.a)(Object(j.a)({},e.dragHandleProps),{},{className:"px-3 py-5",children:Object(g.jsx)(R.b,{color:"#fff",size:30})})),Object(g.jsx)("td",{className:"px-6 py-5",children:Object(g.jsxs)("div",{className:"flex items-center",children:[Object(g.jsx)("img",{src:m,className:"h-14 w-24 object-cover rounded",alt:"content thumbnail"}),Object(g.jsxs)("div",{className:"ml-4",children:[Object(g.jsx)("p",{children:a.title}),Object(g.jsx)("p",{className:"text-sm text-247-timestamp-color font-semibold",children:a.contentType})]})]})}),Object(g.jsx)("td",{className:"px-6 py-5",children:Wt(a.durationInSeconds)}),Object(g.jsx)("td",{className:"px-6 py-5",children:Ka(a.createdAt)}),Object(g.jsx)("td",{className:"px-6 py-5",children:Object(g.jsxs)("div",{className:"relative",ref:t,children:[Object(g.jsx)("button",{onClick:function(){return o(!i)},className:"flex items-center justify-center",children:Object(g.jsx)(pt.c,{color:"#fff",size:24})}),Object(g.jsx)("ul",{style:{transform:"translateX(-90%)"},className:S()("absolute","top-7","bg-247-dark-accent3","p-0","left-1/2","transition-all","translate-y-3","origin-top-right","w-52","z-50","shadow-xl","rounded-lg",{"opacity-0":!i},{"opacity-100":i},{visible:i},{hidden:!i}),children:b.map((function(e){return Object(g.jsx)("li",{className:"w-full py-4 px-5 text-white text-sm font-semibold hover:bg-black hover:text-247-red-straight first:rounded-t-lg last:rounded-b-lg cursor-pointer",onClick:function(t){return e.action(a,d)},children:e.name},nr()(e.name))}))})]})})]}))}},p)}))),Gr=function(e){var t=e.droppableId,a=e.children,n=e.headers,r=e.handleDragEnd;return Object(g.jsxs)("table",{className:"font-customRoboto w-full text-white border-collapse",children:[Object(g.jsx)("thead",{children:Object(g.jsx)("tr",{className:"border border-247-dark-text bg-247-red-straight",children:n.map((function(e,t){return Object(g.jsx)("th",{className:"text-left px-6 py-4 text-lg",children:e},"".concat(e,"_").concat(t))}))})}),Object(g.jsx)(Vr.a,{onDragEnd:r,children:Object(g.jsx)(Vr.c,{droppableId:t,children:function(e){return Object(g.jsxs)("tbody",Object(j.a)(Object(j.a)({},e.droppableProps),{},{ref:e.innerRef,children:[a,e.placeholder]}))}})})]})},Qr=["","Title","Duration","Category","Date","Plays","Status"],Kr=function(e){var t=e.isOpen,a=e.setIsOpen,r=e.currentPage,c=e.indexOfFirstItem,s=e.indexOfLastItem,i=e.pages,o=e.setCurrentPage,l=e.setShownRows,d=e.shownRows,u=e.list,p=e.listSize,b=e.loadingData,j=e.fetchError,m=e.onMultipleAdd,h=e.addingMultipleItem,f=e.addCallback,x=e.contentSearch,O=(e.setContentSearch,e.handleSearchChange),v=Object(n.useState)([]),y=Object(D.a)(v,2),w=y[0],C=y[1],S=function(e){if(w.includes(e)){var t=w.indexOf(e),a=Object(N.a)(w);a.splice(t,1),C(a)}else C([].concat(Object(N.a)(w),[e]))};return Object(g.jsxs)(at,{modalOpen:t,setModalOpen:a,width:1100,cb:function(){return C([])},children:[Object(g.jsxs)("div",{className:"mt-10 rounded-md bg-black border-247-dark-text mb-10",children:[Object(g.jsx)("div",{className:"flex py-4 px-8",children:Object(g.jsx)(Be,{value:x,handleChange:O})}),Object(g.jsxs)(Ca,{headers:Qr,loadingData:b,children:[b&&Object(g.jsx)("div",{className:"flex items-center justify-center w-full absolute py-14",children:Object(g.jsx)(k,{size:"large"})}),!b&&u.length>0&&u.map((function(e,t){return Object(g.jsx)(sr,{checkedItems:w,contentItem:e,index:t,toggleItemCheck:S,hideAction:!0,smallText:!0},"contentItem_".concat(t))}))]}),!b&&!j&&0===u.length&&Object(g.jsx)("div",{className:"w-full py-9",children:Object(g.jsx)(Aa,{title:"No Campaign Found",subtitle:"We cannot find any campaign that fits your criteria."})}),!b&&j&&Object(g.jsx)("div",{className:"w-full py-9",children:Object(g.jsx)(Da,{title:"Error Retrieving Campaigns",subtitle:j})})]}),Object(g.jsx)("div",{className:"flex items-center justify-end mb-20",children:u&&u.length>0&&Object(g.jsx)(ka,{activePage:r,dataLength:p,firstItem:c+1,lastItem:s,pages:i,setActivePage:o,setVisibleRows:l,visibleRows:d})}),!j&&Object(g.jsx)(I,{className:["bg-247-red-straight","block","mt-12","px-12","font-normal"],fullWidth:!0,isLoading:h,handleClick:function(){if(0===w.length)Me.a.error("You have not selected any media item");else{var e=w.map((function(e){return u[e]})).map((function(e){return{title:e.title,mediaUrl:e.mediaUri,durationInSeconds:Gt(e.duration),resourceRef:e.id,modelType:"MediaItem",mediaType:"video",contentType:"non-campaign"}}));console.log(e),m({items:e},(function(){return Me.a.success("Items added to playlist successfully"),C([]),a(!1),f()}))}},children:"Add"})]})},Hr=["","Title","Duration","Date Added","Action"],Jr=function(){var e=Object(n.useState)(1),t=Object(D.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(5),s=Object(D.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(1),d=Object(D.a)(l,2),u=d[0],m=d[1],h=Object(n.useState)(5),f=Object(D.a)(h,2),x=f[0],O=f[1],v=Object(n.useState)(!1),y=Object(D.a)(v,2),w=y[0],N=y[1],C=Object(n.useState)(!1),S=Object(D.a)(C,2),I=S[0],A=S[1],z=Object(n.useState)(),T=Object(D.a)(z,2),_=T[0],E=T[1],P=Object(n.useState)([]),M=Object(D.a)(P,2),F=M[0],q=M[1],B=Object(n.useState)(""),L=Object(D.a)(B,2),U=L[0],V=L[1],W=Object(n.useContext)(Mr),G=W.state,Q=G.generalPlaylist,K=G.fetchingGeneralPlaylist,H=G.fetchGeneralPlaylistErr,J=G.deletingPlaylistItem,Y=G.playlistDeleteError,X=G.addingMultipleItem,Z=G.addMultipleItemError,$=G.reorderError,ee=W.fetchGeneralPlaylist,te=W.addMultipleItemToPlaylist,ae=W.deletePlaylistItem,ne=W.reorderPlaylist,re=W.clearError,ce=Object(n.useContext)(fr),se=ce.state,ie=se.mediaItems,oe=se.mediaItemsSize,le=se.fetchItemsError,de=se.fetchingMediaItems,ue=ce.fetchMediaItems,pe=Object(n.useMemo)((function(){return{limit:x,skip:(u-1)*x}}),[x,u]),be=function(){var e=Object(b.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([ee(),ue(Object(j.a)(Object(j.a)({},pe),{},{status:"not-live"}))]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){be()}),[]),Object(n.useEffect)((function(){q(Q)}),[Q]),ft($,(function(){re("reorder")})),ft(Y,(function(){re("deleteItem")})),ft(Z,(function(){re("addMultiple")}));var je=Na(a,i,F,Q.length),me=je.currentList,he=je.indexOfFirstItem,fe=je.indexOfLastItem,ge=je.pages,xe=Na(u,x,ie,oe),Oe=xe.indexOfFirstItem,ve=xe.indexOfLastItem,ye=xe.pages,we=Object(n.useCallback)(Ur()((function(e){ue(Object(j.a)(Object(j.a)({},pe),{},{status:"not-live"},e.length>0&&{startsWith:e}))}),500),[]),Ne=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),c=Object(D.a)(r,1)[0];return n.splice(a,0,c),n},Ce=function(e,t){var a=Ne(F,t,t+1),n=a.map((function(e){return e.id}));q(a),ne({queue:n})},Se=function(e,t){var a=Ne(F,t,t-1),n=a.map((function(e){return e.id}));q(a),ne({queue:n})},ke=function(){var e=Object(b.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(_.id,(function(){return Me.a.success("Playlist item removed successfully"),be()}));case 2:N(!1),console.log("removing item from playlist...");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)(Dt,{pageTitle:"Ad-Playlists",children:[Object(g.jsxs)("div",{className:"flex items-center justify-between mt-16",children:[Object(g.jsx)("h3",{className:"text-white text-3xl font-semibold",children:"Live Playlist"}),Object(g.jsx)(Qe,{title:"Add Content",icon:Object(g.jsx)(R.a,{className:"mr-2",size:22}),onBtnClick:function(){return A(!0)}})]}),Object(g.jsxs)("div",{className:"mt-16",children:[Object(g.jsx)(Gr,{handleDragEnd:function(e){if(console.log(e),e.destination){var t=Ne(F,e.source.index,e.destination.index),a=t.map((function(e){return e.id}));q(t),ne({queue:a})}},droppableId:"playlist-table",headers:Hr,children:!K&&Q.length>0&&me.map((function(e,t){return Object(g.jsx)(Wr,{playlistItem:e,index:t,draggableId:e.id,onDownwardMove:Ce,onUpwardMove:Se,setConfirmRemoveItem:N,setCurrentItem:E},e.id)}))}),K&&Object(g.jsx)("div",{className:"w-full py-12 bg-black",children:Object(g.jsx)(k,{size:"large"})}),!K&&H&&Object(g.jsx)("div",{className:"w-full py-9 bg-black",children:Object(g.jsx)(Da,{title:"Error Retrieving Playlist",subtitle:H})}),!K&&!H&&0===Q.length&&Object(g.jsx)("div",{className:"w-full py-9",children:Object(g.jsx)(Aa,{title:"No Campaign Found",subtitle:"We cannot find any campaign that fits your criteria."})})]}),Object(g.jsx)("div",{className:"flex items-center justify-end mb-20 mt-12",children:Q&&Q.length>0&&Object(g.jsx)(ka,{activePage:a,dataLength:F.length,firstItem:he+1,lastItem:fe,pages:ge,setActivePage:r,setVisibleRows:o,visibleRows:i})}),Object(g.jsx)(Kr,{isOpen:I,setIsOpen:A,currentPage:u,indexOfFirstItem:Oe,indexOfLastItem:ve,list:ie,listSize:oe,pages:ye,setCurrentPage:m,setShownRows:O,shownRows:x,fetchError:le,loadingData:de,onMultipleAdd:te,addingMultipleItem:X,addCallback:be,contentSearch:U,setContentSearch:V,handleSearchChange:function(e){V(e),we(e)}}),Object(g.jsx)(_n,{open:w,setOpen:N,text:"Are you sure you want to remove this item from the playlist?",icon:Object(g.jsx)(qe.b,{size:28,color:"#fff"}),handleConfirmation:ke,processingConfirm:J})]})},Yr="creating_quiz",Xr="fetching_quiz",Zr="deleting_quiz",$r="fetch_quizzes_error",ec="delete_quiz_error",tc="set_quizzes",ac="set_quizzes_count",nc="create_quiz_error",rc={createQuiz:nc,fetchQuizzes:$r,deleteQuiz:ec},cc=z((function(e,t){switch(t.type){case Yr:return Object(j.a)(Object(j.a)({},e),{},{creatingQuiz:t.payload});case Xr:return Object(j.a)(Object(j.a)({},e),{},{fetchingQuizzes:t.payload});case $r:return Object(j.a)(Object(j.a)({},e),{},{fetchQuizzesError:t.payload});case nc:return Object(j.a)(Object(j.a)({},e),{},{createQuizError:t.payload});case tc:return Object(j.a)(Object(j.a)({},e),{},{quizzes:t.payload});case ac:return Object(j.a)(Object(j.a)({},e),{},{quizzesCount:t.payload});case Zr:return Object(j.a)(Object(j.a)({},e),{},{deletingQuiz:t.payload});case ec:return Object(j.a)(Object(j.a)({},e),{},{deleteQuizError:t.payload});default:return e}}),{creatingQuiz:!1,createQuizError:null,fetchingQuizzes:!1,fetchQuizzesError:null,quizzes:[],quizzesCount:0,deletingQuiz:!1,deleteQuizError:null},{createNewQuiz:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a,n){return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("working"),e({type:Yr,payload:!0}),e({type:nc,payload:null}),t.prev=3,t.next=6,_.post("/quizzes",a,{headers:{Authorization:"Bearer ".concat(Q())}});case 6:e({type:Yr,payload:!1}),n&&n(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),t.t0.response?e({type:nc,payload:t.t0.response.data.message||"Unable to create quiz. Something went wrong"}):e({type:nc,payload:"Unable to create quiz. Something went wrong"}),e({type:Yr,payload:!1});case 14:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e,a){return t.apply(this,arguments)}}()},fetchQuizzes:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a){var n;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:Xr,payload:!0}),e({type:$r,payload:null}),t.prev=2,t.next=5,_.get("/quizzes",{headers:{Authorization:"Bearer ".concat(Q())},params:Object(j.a)(Object(j.a)({},a),{},{sortBy:"createdAt",orderBy:"desc"})});case 5:n=t.sent,e({type:tc,payload:n.data.quizzes}),e({type:ac,payload:n.data.count}),e({type:Xr,payload:!1}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),t.t0.response?e({type:$r,payload:t.t0.response.data.message||"Unable to fetch quizzes. Something went wrong"}):e({type:$r,payload:"Unable to fetch quizzes. Something went wrong"}),e({type:Xr,payload:!1});case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()},deleteQuiz:function(e){return function(){var t=Object(b.a)(Object(p.a)().mark((function t(a,n){var r;return Object(p.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:Zr,payload:!0}),e({type:ec,payload:null}),t.prev=2,t.next=5,_.delete("/quiz/".concat(a),{headers:{Authorization:"Bearer ".concat(Q())}});case 5:r=t.sent,console.log(r.data),e({type:Zr,payload:!1}),n&&n(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),t.t0.response?e({type:ec,payload:t.t0.response.data.message||"Unable to delete quiz. Something went wrong"}):e({type:ec,payload:"Unable to delete quiz. Something went wrong"}),e({type:Zr,payload:!1});case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e,a){return t.apply(this,arguments)}}()},clearError:function(e){return function(t){e({type:rc[t],payload:null})}}}),sc=cc.Context,ic=cc.Provider,oc={0:"A",1:"B",2:"C",3:"D"},lc=Ge(Object(n.forwardRef)((function(e,t){var a=e.setCurrentItem,n=e.checkedItems,r=e.index,c=e.toggleItemCheck,s=e.quizItem,i=e.setConfirmDeleteItem,o=e.setOpen,l=e.open,d=s.options.findIndex((function(e){return e.toLowerCase()===s.answer.toLowerCase()}));return Object(g.jsxs)("tr",{className:S()("border","border-247-dark-text","hover:bg-gray-700","text-lg",{"bg-gray-700":n.includes(r)},{"odd:bg-247-dark-accent3":!n.includes(r)}),children:[Object(g.jsx)("td",{className:"px-3 py-5",children:Object(g.jsx)(Bt,{checked:!!n.includes(r),iconColor:"#CACACA",name:s._id.toLowerCase(),handleChange:function(){return c(r)}})}),Object(g.jsx)("td",{className:"px-6 py-5 max-w-xs",children:s.question}),Object(g.jsx)("td",{className:"px-6 py-5",children:Ut(s.timesAnswered,!1,!0)}),Object(g.jsx)("td",{className:"px-6 py-5",children:Ut(s.timesAnsweredCorrectly,!1,!0)}),Object(g.jsx)("td",{className:"px-6 py-5",children:oc[d]}),Object(g.jsx)("td",{children:Object(g.jsxs)("div",{className:"relative",ref:t,children:[Object(g.jsx)("button",{onClick:function(){return o(!l)},className:"flex items-center justify-center",children:Object(g.jsx)(pt.c,{color:"#fff",size:24})}),Object(g.jsx)("ul",{style:{transform:"translateX(-90%)"},className:S()("absolute","top-7","bg-247-dark-accent3","p-0","left-1/2","transition-all","translate-y-3","origin-top-right","w-52","z-50","shadow-xl","rounded-lg",{"opacity-0":!l},{"opacity-100":l},{visible:l},{hidden:!l}),children:Object(g.jsx)("li",{className:"w-full py-4 px-5 text-white text-sm font-semibold hover:bg-black hover:text-247-red-straight first:rounded-t-lg last:rounded-b-lg cursor-pointer",onClick:function(e){o(!1),a(s),i(!0)},children:"Delete question"})})]})})]})}))),dc=function(e){var t,a,n,r,c,s=e.isOpen,i=e.setIsOpen,o=e.submitAction,l=e.setMediaItem,d=e.creatingQuiz,u=q.b({question:q.c().required("This field is required"),optionA:q.c().required("This field is required"),optionB:q.c().required("This field is required"),optionC:q.c().required("This field is required"),optionD:q.c().required("This field is required"),correctOption:q.b().required("This field is required")}),p=Object(w.e)({resolver:Object(F.a)(u)}),b=p.handleSubmit,j=p.register,m=p.formState.errors,h=p.control;return Object(g.jsxs)(at,{modalOpen:s,setModalOpen:i,width:704,children:[Object(g.jsx)("h3",{className:"text-white text-center text-2xl font-semibold",children:"New Quiz"}),Object(g.jsxs)("form",{className:"mt-10",onSubmit:b(o),children:[Object(g.jsx)(O,{label:"Question",darkMode:!0,placeholder:"enter quiz question",type:"text",registerFn:j,name:"question",errorText:null===(t=m.question)||void 0===t?void 0:t.message}),Object(g.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[Object(g.jsx)(O,{label:"Option A",darkMode:!0,placeholder:"enter option a",type:"text",registerFn:j,name:"optionA",errorText:null===(a=m.optionA)||void 0===a?void 0:a.message}),Object(g.jsx)(O,{label:"Option B",darkMode:!0,placeholder:"enter option b",type:"text",registerFn:j,name:"optionB",errorText:null===(n=m.optionB)||void 0===n?void 0:n.message})]}),Object(g.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[Object(g.jsx)(O,{label:"Option C",darkMode:!0,placeholder:"enter option c",type:"text",registerFn:j,name:"optionC",errorText:null===(r=m.optionC)||void 0===r?void 0:r.message}),Object(g.jsx)(O,{label:"Option D",darkMode:!0,placeholder:"enter option d",type:"text",registerFn:j,name:"optionD",errorText:null===(c=m.optionD)||void 0===c?void 0:c.message})]}),Object(g.jsx)(w.a,{name:"correctOption",control:h,render:function(e){var t,a=e.field;return Object(g.jsx)(dt,{label:"Select Correct Option",darkMode:!0,options:[{value:"a",label:"A"},{value:"b",label:"B"},{value:"c",label:"C"},{value:"d",label:"D"}],placeholderText:"select the correct option",value:a.value,handleChange:function(e){return a.onChange(e)},errorText:null===(t=m.correctOption)||void 0===t?void 0:t.message})}}),Object(g.jsx)(ht,{label:"Upload Quiz Image",multiple:!1,callUpdateFilesCb:function(e){var t=Object.values(e);l(t)},accepts:".jpg,.png,.jpeg"}),Object(g.jsx)(I,{type:"submit",className:["bg-247-red","block","mt-12","px-12","font-normal"],fullWidth:!0,isLoading:d,children:"Submit Quiz"})]})]})},uc=function(e){var t=e.checkedItems,a=e.toggleAll;return Object(g.jsx)(Bt,{checked:t.length===Lt.length,iconColor:"#CACACA",name:"checkAll",handleChange:a})},pc=function(){var e=Object(n.useState)([]),t=Object(D.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(1),s=Object(D.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(5),d=Object(D.a)(l,2),u=d[0],m=d[1],h=Object(n.useState)(),f=Object(D.a)(h,2),x=f[0],O=f[1],v=Object(n.useState)([]),y=Object(D.a)(v,2),w=y[0],C=y[1],S=Object(n.useState)(!1),I=Object(D.a)(S,2),A=I[0],z=I[1],T=Object(n.useState)(!1),_=Object(D.a)(T,2),E=_[0],P=_[1],M=Object(n.useContext)(sc),F=M.state,q=F.creatingQuiz,B=F.createQuizError,L=F.quizzes,U=F.quizzesCount,V=F.fetchQuizzesError,W=F.fetchingQuizzes,G=F.deletingQuiz,Q=F.deleteQuizError,K=M.createNewQuiz,H=M.fetchQuizzes,J=M.deleteQuiz,Y=M.clearError;ft(B,(function(){Y("createQuiz")})),ft(Q,(function(){Y("deleteQuiz")}));var X=Object(n.useMemo)((function(){return{limit:u,skip:(i-1)*u}}),[u,i]);Object(n.useEffect)((function(){H(Object(j.a)({},X))}),[X]);var Z=Na(i,u,L,U),$=Z.indexOfFirstItem,ee=Z.indexOfLastItem,te=Z.pages;console.log(L);var ae=function(e){if(a.includes(e)){var t=a.indexOf(e),n=Object(N.a)(a);n.splice(t,1),r(n)}else r([].concat(Object(N.a)(a),[e]))},ne=function(){return Me.a.success("Quiz has been sucessfully deleted!"),H(Object(j.a)({},X))},re=function(){var e=Object(b.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(x._id,ne);case 2:z(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){return Me.a.success("New quiz added successfully!"),H(Object(j.a)({},X))},se=function(){var e=Object(b.a)(Object(p.a)().mark((function e(t){var a,n;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="option".concat(t.correctOption.value.toUpperCase()),(n=new FormData).append("question",t.question),n.append("option1",t.optionA),n.append("option2",t.optionB),n.append("option3",t.optionC),n.append("option4",t.optionD),n.append("answer",t[a]),n.append("quizImage",w[0]),e.next=11,K(n,ce);case 11:P(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=[Object(g.jsx)(uc,{checkedItems:a,toggleAll:function(){if(0!==a.length)r([]);else{var e=Array.from({length:Lt.length},(function(e,t){return t}));r(e)}}}),"Question","Answers","Correct Answer","Correct Option",""];return Object(g.jsxs)(Dt,{children:[Object(g.jsx)("div",{className:"w-full flex items-center mt-20 justify-end",children:Object(g.jsx)(Qe,{title:"New Quiz",icon:Object(g.jsx)(R.a,{className:"mr-2",size:22}),onBtnClick:function(){return P(!0)}})}),Object(g.jsxs)("div",{className:"mt-8 mb-10 bg-247-secondary",children:[Object(g.jsxs)(Ca,{headers:ie,loadingData:W,children:[W&&Object(g.jsx)("div",{className:"flex items-center justify-center w-full absolute py-14",children:Object(g.jsx)(k,{size:"large"})}),!W&&L.length>0&&L.map((function(e,t){return Object(g.jsx)(lc,{quizItem:e,index:t,checkedItems:a,toggleItemCheck:ae,setConfirmDeleteItem:z,setCurrentItem:O},e._id)}))]}),!W&&!V&&0===L.length&&Object(g.jsx)("div",{className:"w-full py-9",children:Object(g.jsx)(Aa,{title:"No Campaign Found",subtitle:"We cannot find any campaign that fits your criteria."})}),!W&&V&&Object(g.jsx)("div",{className:"w-full py-9",children:Object(g.jsx)(Da,{title:"Error Retrieving Campaigns",subtitle:V})})]}),Object(g.jsx)("div",{className:"flex items-center justify-end mb-20",children:L&&L.length>0&&Object(g.jsx)(ka,{activePage:i,dataLength:U,firstItem:$+1,lastItem:ee,pages:te,setActivePage:o,setVisibleRows:m,visibleRows:u})}),Object(g.jsx)(_n,{open:A,setOpen:z,text:"Are you sure you want to delete this question?",icon:Object(g.jsx)(qe.b,{size:28,color:"#fff"}),handleConfirmation:re,processingConfirm:G}),Object(g.jsx)(dc,{isOpen:E,setIsOpen:P,submitAction:se,setMediaItem:C,creatingQuiz:q})]})},bc=function(){return Object(g.jsx)("div",{children:Object(g.jsx)(G.a,{width:"100%",height:"140px",shape:"rect",colorEnd:"#1A1C1F",colorStart:"#1D2023"})})},jc=["","Driver","Total Earning","Pending Payout"],mc=function(e){var t=e.goToPrevPage;return Object(g.jsxs)("div",{className:"flex items-center",children:[Object(g.jsx)("button",{onClick:t,className:"bg-transparent border-0 outline-none focus:outline-none",children:Object(g.jsx)(R.c,{color:"#f00",size:28})}),Object(g.jsx)("h3",{className:"text-2xl text-247-gray font-semibold ml-14",children:"Pending Payouts"})]})},hc=function(){var e=Object(n.useState)([]),t=Object(D.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(1),s=Object(D.a)(c,2),o=s[0],l=s[1],d=Object(n.useState)(5),u=Object(D.a)(d,2),j=u[0],m=u[1],h=Object(n.useState)(!1),f=Object(D.a)(h,2),x=f[0],O=f[1],v=Object(n.useState)(!1),y=Object(D.a)(v,2),w=y[0],C=y[1],S=Object(n.useState)(),I=Object(D.a)(S,2),A=I[0],z=I[1],T=Object(i.g)(),_=Object(n.useContext)(mn),E=_.state,P=E.fetchingTotalSettled,M=E.totalSettled,F=E.fetchingTotalPending,q=E.totalPending,B=E.fetchingPayouts,R=E.payoutRequests,L=E.payoutsListSize,U=E.fetchPayoutsError,V=_.getTotalSettledPayouts,W=_.getTotalPendingPayouts,G=_.fetchPayoutRequests,Q=Object(n.useMemo)((function(){return P||F}),[P,F]),K=Na(o,j,R,L),H=K.indexOfFirstItem,J=K.indexOfLastItem,Y=K.pages;console.log(R,L),Object(n.useEffect)((function(){Object(b.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([V(),W(),G({status:"pending"})]);case 2:case"end":return e.stop()}}),e)})))()}),[]);return Object(g.jsxs)(Dt,{customHeader:Object(g.jsx)(mc,{goToPrevPage:function(){return T.goBack()}}),children:[Q?Object(g.jsx)("div",{className:"mt-16 grid grid-cols-3 gap-6",children:Array.from({length:2},(function(e,t){return t+1})).map((function(e){return Object(g.jsx)(bc,{},e)}))}):Object(g.jsxs)("div",{className:"mt-16 grid grid-cols-3 gap-6",children:[Object(g.jsx)(la,{bgColor:"bg-blue-gradient",infoTitle:"Pending Payout",infoValue:Ut(Qt(q),!0,!0)}),Object(g.jsx)(la,{bgColor:"bg-green-gradient",infoTitle:"Settled Payout",infoValue:Ut(Qt(M),!0,!0)})]}),Object(g.jsxs)("div",{className:"mt-10 bg-247-secondary rounded-md border-2 border-247-dark-text mb-10",children:[Object(g.jsxs)(Ca,{headers:jc,loadingData:B,children:[B&&Object(g.jsx)("div",{className:"flex items-center justify-center w-full absolute py-14",children:Object(g.jsx)(k,{size:"large"})}),!B&&R.length>0&&R.map((function(e,t){var n,c;return Object(g.jsxs)("tr",{className:a.includes(t)?"text-lg bg-gray-700 border border-247-dark-text  hover:bg-gray-700":"text-lg border border-247-dark-text odd:bg-247-dark-accent3  hover:bg-gray-700",children:[Object(g.jsx)("td",{className:"px-3 py-5",children:Object(g.jsx)(Bt,{checked:!!a.includes(t),iconColor:"#CACACA",name:e.id.toLowerCase(),handleChange:function(){return function(e){if(a.includes(e)){var t=a.indexOf(e),n=Object(N.a)(a);n.splice(t,1),r(n)}else r([].concat(Object(N.a)(a),[e]))}(t)}})}),Object(g.jsx)("td",{className:"px-6 py-5",children:Object(g.jsxs)("div",{children:[null===e||void 0===e||null===(n=e.driver)||void 0===n?void 0:n.name,Object(g.jsx)("span",{className:"block text-sm font-light",children:null===e||void 0===e||null===(c=e.driver)||void 0===c?void 0:c.email})]})}),Object(g.jsx)("td",{className:"px-6 py-5",children:Ut(Qt(null===e||void 0===e?void 0:e.amount),!0,!0)}),Object(g.jsx)("td",{className:"px-6 py-5",children:Object(g.jsx)(Qe,{onBtnClick:function(){var t,a,n,r,c,s,i;z({bankName:null===e||void 0===e||null===(t=e.driver)||void 0===t||null===(a=t.bankInformation)||void 0===a||null===(n=a.bank)||void 0===n?void 0:n.name,accountNumber:null===e||void 0===e||null===(r=e.driver)||void 0===r||null===(c=r.bankInformation)||void 0===c?void 0:c.accountNumber,accountName:null===e||void 0===e||null===(s=e.driver)||void 0===s||null===(i=s.bankInformation)||void 0===i?void 0:i.accountName,pendingPayout:Qt(null===e||void 0===e?void 0:e.amount)}),O(!0)},title:"Settle"})})]},"payout_".concat(e.id))}))]}),!B&&!U&&0===R.length&&Object(g.jsx)("div",{className:"w-full py-9",children:Object(g.jsx)(Aa,{title:"No Campaign Found",subtitle:"We cannot find any campaign that fits your criteria."})}),!B&&U&&Object(g.jsx)("div",{className:"w-full py-9",children:Object(g.jsx)(Da,{title:"Error Retrieving Campaigns",subtitle:U})})]}),Object(g.jsx)("div",{className:"flex items-center justify-end mb-20",children:R&&L>0&&Object(g.jsx)(ka,{activePage:o,dataLength:L,firstItem:H+1,lastItem:J,pages:Y,setActivePage:l,setVisibleRows:m,visibleRows:j})}),Object(g.jsx)(Mn,{isOpen:x,setIsOpen:O,driverDeets:A,handlePayout:function(e){console.log(e,"confirming payout"),O(!1),C(!0)}}),Object(g.jsx)(_n,{open:w,setOpen:C,text:"Continue payout for ".concat(null===A||void 0===A?void 0:A.accountName),handleConfirmation:function(){console.log("paying driver..."),C(!1)},icon:Object(g.jsx)(yn.a,{size:32,color:"#fff"})})]})},fc=["component","userType"],gc=function(e){var t=e.component,a=e.userType,r=Object(m.a)(e,fc),c=Object(n.useContext)(P).state,s=c.user,o=c.loggedIn,l=Object(i.h)();return Object(g.jsx)(i.b,Object(j.a)(Object(j.a)({},r),{},{children:o&&(null===s||void 0===s?void 0:s.kind.toLowerCase())===a?Object(g.jsx)(t,{}):Object(g.jsx)(i.a,{to:{pathname:d,state:{from:l,userType:a}}})}))};var xc=function(){var e=Object(i.h)();return console.log(e),Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)(i.d,{children:[Object(g.jsx)(i.b,{exact:!0,path:"/",children:Object(g.jsx)(i.a,{to:{pathname:d,state:{from:e}}})}),Object(g.jsx)(i.b,{path:d,component:B}),Object(g.jsx)(gc,{exact:!0,userType:"admin",path:u,component:ia}),Object(g.jsx)(gc,{path:"/advertisers",exact:!0,userType:"admin",component:Pa}),Object(g.jsx)(gc,{path:"/advertiser/:advertiserId",userType:"admin",component:en}),Object(g.jsx)(gc,{path:"/drivers",exact:!0,userType:"admin",component:On}),Object(g.jsx)(gc,{path:"/driver/:driverId",userType:"admin",component:Ln}),Object(g.jsx)(gc,{path:"/campaigns",exact:!0,userType:"admin",component:Gn}),Object(g.jsx)(gc,{path:"/campaign/:campaignId",userType:"admin",component:Xn}),Object(g.jsx)(gc,{path:"/send-notifications",exact:!0,userType:"admin",component:er}),Object(g.jsx)(gc,{path:"/content-library",exact:!0,userType:"admin",component:Rr}),Object(g.jsx)(gc,{path:"/playlist-manager",exact:!0,userType:"admin",component:Jr}),Object(g.jsx)(gc,{path:"/quiz-centre",exact:!0,userType:"admin",component:pc}),Object(g.jsx)(gc,{path:"/pending-payouts",exact:!0,userType:"admin",component:hc})]})})},Oc=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,583)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(M,{children:Object(g.jsx)(wa,{children:Object(g.jsx)(ic,{children:Object(g.jsx)(_e,{children:Object(g.jsx)(hn,{children:Object(g.jsx)(Fr,{children:Object(g.jsx)(zn,{children:Object(g.jsx)(gr,{children:Object(g.jsx)(pe,{children:Object(g.jsx)(ke,{children:Object(g.jsx)(i.c,{history:l,children:Object(g.jsx)(xc,{})})})})})})})})})})})})}),document.getElementById("root")),Oc()}},[[568,1,2]]]);
//# sourceMappingURL=main.a6226353.chunk.js.map